## å‰è¨€

æ­¤å¤„å¼•ç”¨ä¸€ä¸‹  [clean-code-javascript ](https://github.com/ryanmcdermott/clean-code-javascript)  ä¸­çš„ä¸€å¼ å›¾ç‰‡èƒ½æ›´å½¢è±¡çš„å½¢å®¹å¹²å‡€çš„ä»£ç ä¸ä¸å¹²å‡€çš„ä»£ç çš„åŒºåˆ«:

<img src="JavaScript%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83.assets/image-20231225162407131.png" alt="image-20231225162407131" style="zoom:67%;" /> 

è¿™ä¸ªæ–‡ç« ä¸­æœ‰ä¸€æ®µè¯æˆ‘è§‰å¾—è¯´çš„ç‰¹åˆ«å¥½:

* äº†è§£è¿™äº›ä¸ä¼šç«‹å³ä½¿ä½ æˆä¸ºæ›´å¥½çš„è½¯ä»¶å¼€å‘äººå‘˜ï¼Œä¸ä»–ä»¬ä¸€èµ·å·¥ä½œå¤šå¹´å¹¶ä¸æ„å‘³ç€ä½ ä¸ä¼šçŠ¯é”™è¯¯ã€‚æ¯ä¸€æ®µä»£ç éƒ½æ˜¯ä»åˆç¨¿å¼€å§‹çš„ï¼Œå°±åƒæ¹¿ç²˜åœŸè¢«å¡‘é€ æˆæœ€ç»ˆå½¢å¼ä¸€æ ·ã€‚
* æœ€åï¼Œå½“æˆ‘ä»¬ä¸åŒè¡Œä¸€èµ·å›é¡¾æ—¶ï¼Œæˆ‘ä»¬ä¼šå‰”é™¤ä¸å®Œç¾ä¹‹å¤„ã€‚
* `ä¸è¦ä¸ºéœ€è¦æ”¹è¿›çš„åˆç¨¿è€Œè‡ªè´£ã€‚è€Œæ˜¯æ‰“è´¥ä»£ç ï¼`

##### **ä¸è¦ä¸ºéœ€è¦æ”¹è¿›çš„åˆç¨¿è€Œè‡ªè´£ã€‚è€Œæ˜¯æ‰“è´¥ä»£ç ï¼**

## ä¸€ã€å˜é‡

### 1ã€const ã€letç›¸å…³è§„èŒƒ

#### â…  - ä½¿ç”¨  const  æˆ–è€…  let  æ¥å®šä¹‰å˜é‡

ä½¿ç”¨ `const` æˆ–è€… `let` æ¥å®šä¹‰å˜é‡ã€‚ ä¸è¿™æ ·åšå°†åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡ã€‚ æˆ‘ä»¬å¸Œæœ›é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚ Captain Planet è­¦å‘Šè¿‡æˆ‘ä»¬ã€‚ eslint: [`no-undef`](https://eslint.org/docs/rules/no-undef) [`prefer-const`](https://eslint.org/docs/rules/prefer-const)

```js
// åçš„
superPower = new SuperPower();

// å¥½çš„
const superPower = new SuperPower();
```

#### â…¡ - ä½¿ç”¨  const  æˆ–è€…  let å£°æ˜æ¯ä¸€ä¸ªå˜é‡

* è¿™æ ·æ›´å®¹æ˜“æ·»åŠ æ–°çš„å˜é‡å£°æ˜
* è€Œä¸”ä½ ä¸å¿…æ‹…å¿ƒæ˜¯ä½¿ç”¨ `;` è¿˜æ˜¯ä½¿ç”¨ `,` æˆ–å¼•å…¥æ ‡ç‚¹ç¬¦å·çš„å·®åˆ«ã€‚å®é™…é˜…è¯»æ—¶å®¹æ˜“å¿½ç•¥
* ä½ å¯ä»¥é€šè¿‡ debugger é€æ­¥æŸ¥çœ‹æ¯ä¸ªå£°æ˜ï¼Œè€Œä¸æ˜¯ç«‹å³è·³è¿‡æ‰€æœ‰å£°æ˜

```js
// åçš„å†™æ³• 
const items = getItems(),
      falg = true,
      name = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
// åçš„å†™æ³•
const items = getItems(),
      falg = true; //æ­¤å¤„ä½¿ç”¨äº†åˆ†å·,å®é™…ä¸Šä¼šå¯¼è‡´ [ dragonball ] å¹¶æ²¡æœ‰ç”¨constå£°æ˜
      name = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';    //å˜æˆäº†å…¨å±€å˜é‡

// å¥½çš„ä»£ç 
const items = getItems();
const falg = true;
const name = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
```

#### â…¢ - æŠŠ  const  å£°æ˜çš„æ”¾åœ¨ä¸€èµ·ï¼ŒæŠŠ  let  å£°æ˜çš„æ”¾åœ¨ä¸€èµ·

 ###### **ä¸ºä»€ä¹ˆ? è¿™åœ¨åè¾¹å¦‚æœéœ€è¦æ ¹æ®å‰è¾¹çš„èµ‹å€¼å˜é‡æŒ‡å®šä¸€ä¸ªå˜é‡æ—¶å¾ˆæœ‰ç”¨**

```js
// éå¸¸åçš„ --ä¸ºä»€ä¹ˆåå‰é¢è¯´è¿‡äº†
let i, len, dragonball,
items = getItems(),
falg = true;

// åçš„  -- è¿™æ ·æºæ‚ç€å†™å¾ˆå®¹æ˜“è®©ä½ æ··æ·†ä»–ä»¬æ˜¯letè¿˜æ˜¯constå£°æ˜çš„
let i;
const items = getItems();
let dragonball;
const falg = true;
let len;

// å¥½çš„å†™æ³•
const falg = true;
const items = getItems();
let dragonball;
let i;
let length;
```

#### â…£ -  åœ¨ä½ éœ€è¦çš„ä½¿ç”¨å®šä¹‰å˜é‡ï¼Œä½†æ˜¯è¦æŠŠå®ƒä»¬æ”¾åœ¨ä¸€ä¸ªåˆç†çš„åœ°æ–¹

###### **ä¸ºä»€ä¹ˆ? `let` å’Œ `const` æ˜¯å—çº§ä½œç”¨åŸŸè€Œä¸æ˜¯å‡½æ•°ä½œç”¨åŸŸ**

```js
// åçš„ - ä¸å¿…è¦çš„å‡½æ•°è°ƒç”¨
function checkName(hasName) {
//å®é™…ä¸Šå¦‚æœä¼ å…¥å‚æ•° hasName ç¬¦åˆæ¡ä»¶ä¸­æ–­äº†,é‚£ä¹ˆè¿™è¡Œä»£ç æ¯«æ— æ„ä¹‰
const name = getName();

if (hasName === 'test')  return false;

if (name === 'test') {
this.setName('');
return false;
}

return name;
}

// å¥½çš„
function checkName(hasName) {
//å¦‚æœä¼ å…¥çš„ hasName ç¬¦åˆè¦æ±‚å°±åº”è¯¥ç›´æ¥ä¸­æ–­è¿”å›äº†,å› ä¸ºä¼ å‚ä¸ç”¨å†è¿›è¡Œè·å–
if (hasName === 'test') return false;

//å¦‚æœ hasName ä¸ç¬¦åˆæ¡ä»¶å†è¿è¡Œåˆ°è¿™é‡Œ,å¯ä»¥ä¿è¯æ¯æ¬¡èµ°åˆ°è¿™é‡Œ,è¿™ä¸ªå‡½æ•°è°ƒç”¨æ°¸è¿œæ˜¯æœ‰æ„ä¹‰çš„
const name = getName();
if (name === 'test') {
this.setName('');
return false;
}

return name;
}
```

#### â…¤ - ä½¿ç”¨ `const` å®šä¹‰ä½ çš„æ‰€æœ‰å¼•ç”¨ï¼›é¿å…ä½¿ç”¨ `var`

 ###### **ä¸ºä»€ä¹ˆ? è¿™æ ·èƒ½å¤Ÿç¡®ä¿ä½ ä¸èƒ½é‡æ–°èµ‹å€¼ä½ çš„å¼•ç”¨ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´é”™è¯¯æˆ–è€…äº§ç”Ÿéš¾ä»¥ç†è§£çš„ä»£ç **

```js
// ä¸å¥½çš„
var a = 1;
var b = 2;

// æ¨èçš„
const a = 1;
const b = 2;
```

#### â…¥  - å¦‚æœä½ å¿…é¡»é‡æ–°èµ‹å€¼ä½ çš„å¼•ç”¨ï¼Œ ä½¿ç”¨ `let` ä»£æ›¿ `var`

 ###### **ä¸ºä»€ä¹ˆ? `let` æ˜¯å—çº§ä½œç”¨åŸŸï¼Œè€Œä¸åƒ `var` æ˜¯å‡½æ•°ä½œç”¨åŸŸ**

```js
// ä¸æ¨èçš„
var count = 1;
if (true) {
  count += 1;
}

//æ¨èçš„
let count = 1;
if (true) {
  count += 1;
}
```

#### â…¦ - æ³¨æ„ï¼Œlet å’Œ const éƒ½æ˜¯å—çº§èŒƒå›´çš„

```js
// const å’Œ let åªå­˜åœ¨äºä»–ä»¬å®šä¹‰çš„å—ä¸­ã€‚
{
  let a = 1;
  const b = 1;
}
console.log(a); // ReferenceError
console.log(b); // ReferenceError
```

### 2ã€ ä½¿ç”¨æœ‰æ„ä¹‰ä¸”å¯å‘éŸ³çš„å˜é‡å  

```js
//åçš„
const yyyymmdstr = moment().format("YYYY/MM/DD");
//å¥½çš„
const currentDate = moment().format("YYYY/MM/DD");
```

### 3ã€ å°½é‡å¯¹ç›¸åŒç±»å‹çš„å˜é‡ä½¿ç”¨ç›¸åŒçš„è¯æ±‡

```js
//åçš„--åŒæ ·æ˜¯è·å–ç”¨æˆ·ä¿¡æ¯,å–äº†ä¸‰ç§åå­—,è¿™æ ·å®¹æ˜“é€ æˆæ··æ·†ä¸”ä¸æ˜“ç†è§£
getUserInfo();
getClientData();
getCustomerRecord();

//å¥½çš„
getUser();
```

### 4ã€ä½¿ç”¨å¯æœç´¢çš„åç§°

* æˆ‘ä»¬å°†é˜…è¯»çš„ä»£ç æ¯”æˆ‘ä»¬ç¼–å†™çš„ä»£ç å¤šã€‚
* é‡è¦çš„æ˜¯æˆ‘ä»¬ç¼–å†™çš„ä»£ç å¯è¯»å’Œå¯æœç´¢ã€‚
* é€šè¿‡ä¸å‘½åæœ€ç»ˆå¯¹ç†è§£æˆ‘ä»¬çš„ç¨‹åºæœ‰æ„ä¹‰çš„å˜é‡ï¼Œæˆ‘ä»¬ä¼¤å®³äº†æˆ‘ä»¬çš„è¯»è€…ã€‚
* ä½¿ä½ çš„å§“åå¯æœç´¢ã€‚[ **buddy.js** ]å’Œ [ **ESLint** ] ç­‰å·¥å…· å¯ä»¥å¸®åŠ©è¯†åˆ«æœªå‘½åçš„å¸¸é‡ã€‚

```js
//åçš„ -- åˆ°åº•æ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Ÿ
setTimeout(blastOff, 86400000);

//å¥½çš„  --  å°†å®ƒä»¬å£°æ˜ä¸ºå¤§å†™çš„å‘½åå¸¸é‡
const MILLISECONDS_PER_DAY = 60 * 60 * 24 * 1000; //86400000;
setTimeout(blastOff, MILLISECONDS_PER_DAY); //è¿™æ ·æˆ‘ä»¬å°±èƒ½å¾ˆæ¸…æ™°åœ°çŸ¥é“è¿™ä¸²æ•°å­—æ˜¯ä»€ä¹ˆä½œç”¨äº†
```

### 5ã€ä½¿ç”¨è§£é‡Šå˜é‡

###### åçš„ä»£ç 

```js
const address = "One Infinite Loop, Cupertino 66666";
const cityZipCodeRegex = /^[^,\\]+[,\\\s]+(.+?)\s*(\d{5})?$/;
//address.match(cityZipCodeRegex) ä¼šå¾—åˆ°ä¸€ä¸ªæ•°ç»„,é‡Œé¢æ”¾ç½®çš„æ˜¯è¢«åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²
saveCityZipCode(
  address.match(cityZipCodeRegex)[1],//è¿™é‡Œç›´æ¥å°†åŒ¹é…åˆ°çš„æ•°ç»„ç”¨ä¸‹æ ‡ç›´æ¥å–å‡ºæ¥
  address.match(cityZipCodeRegex)[2]
);
```

###### å¥½çš„ä»£ç 

```js
const address = "One Infinite Loop, Cupertino 66666";
const cityZipCodeRegex = /^[^,\\]+[,\\\s]+(.+?)\s*(\d{5})?$/;
//è¿™å¥è¯æ„æ€æ˜¯, å°† address.match(cityZipCodeRegex) åŒ¹é…å¾—åˆ°çš„æ•°ç»„ç»“æœ
//ç¬¬0ä½èµ‹å€¼ç»™ _ ; ç¬¬ä¸€ä½èµ‹å€¼ç»™ city ; ç¬¬äºŒä½èµ‹å€¼ç»™ zipode , è¿™å°±æ˜¯è§£é‡Šå˜é‡
const [_, city, zipCode] = address.match(cityZipCodeRegex) || [];
//è¿™æ—¶å€™å†å°†å˜é‡ä¼ å…¥,è¿™æ ·çš„ä»£ç æ›´å®¹æ˜“é˜…è¯»
saveCityZipCode(city, zipCode);
```

![image-20231225162446558](JavaScript%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83.assets/image-20231225162446558.png)

- **[ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°](https://gitee.com/hongjilin/hongs-study-notes/tree/master/ç¼–ç¨‹_å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°/ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°)** 

### 6ã€é¿å…å¿ƒç†æ˜ å°„

###### **æ˜¾å¼ä¼˜äºéšå¼**

```js
const locations = ["æ·±åœ³", "æ­å·", "å¦é—¨"];
locations.forEach(l = {
  doStuff();
  doSomeOtherStuff();
  dispatch(l);  //ç­‰ç­‰ï¼Œ`l` åˆæ˜¯ä»€ä¹ˆï¼Ÿ å¦‚æœä¸å»çœ‹ä¸Šé¢ä»£ç æˆ‘ä»¬å¾ˆéš¾çŒœå‡º
});

//å¥½çš„
const locations = ["æ·±åœ³", "æ­å·", "å¦é—¨"];
locations.forEach(location = {
  doStuff();
  doSomeOtherStuff();
  dispatch(location); //è¿™æ ·å°±ç®—ä¸å»çœ‹ä¸Šé¢ä»£ç ,æˆ‘ä»¬å·²ç»èƒ½å¤§è‡´çŒœå‡ºæ˜¯ä»€ä¹ˆäº†
});
```

### 7ã€ ä¸è¦æ·»åŠ ä¸éœ€è¦çš„ä¸Šä¸‹æ–‡

**å¦‚æœä½ çš„ç±»/å¯¹è±¡åç§°å‘Šè¯‰ä½ ä¸€äº›ä¿¡æ¯ï¼Œè¯·ä¸è¦åœ¨ä½ çš„å˜é‡åç§°ä¸­é‡å¤**

```js
//åä»£ç 
const Farmers = {
  farmersProfession: "ç¨‹åºå‘˜", //å®é™…ä¸Šç±»åå·²ç»è¯´æ˜äº†è¿™æ˜¯ä¸ª `å†œæ°‘` äº†,æ²¡å¿…è¦å†å¼ºè°ƒ
  farmersName: "åŠªåŠ›å­¦ä¹ çš„æ±ª",
};
function paintCar(farmers, name) {
  farmers.farmersName = name; 
}

//å¥½çš„  -- ä¼šç›¸å¯¹æ›´ç®€æ´ç‚¹
const Farmers = {
  profession: "ç¨‹åºå‘˜",
  name: "åŠªåŠ›å­¦ä¹ çš„æ±ª",
};

function paintCar(farmers, name) {
  farmers.name = name;
}
```

### 8ã€ä½¿ç”¨é»˜è®¤å‚æ•°è€Œä¸æ˜¯çŸ­è·¯æˆ–æ¡ä»¶

é»˜è®¤å‚æ•°é€šå¸¸æ¯”çŸ­è·¯æ›´å¹²å‡€ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœä½ ä½¿ç”¨å®ƒä»¬ï¼Œä½ çš„å‡½æ•°å°†ä»…æä¾›`undefined` å‚æ•°çš„é»˜è®¤å€¼ã€‚å…¶ä»–â€œfalsyâ€çš„ä»·å€¼è§‚ï¼Œå¦‚`''`ï¼Œ`""`ï¼Œ`false`ï¼Œ`null`ï¼Œ`0`ï¼Œå’Œ `NaN`ï¼Œä¸ä¼šè¢«é»˜è®¤å€¼ä»£æ›¿ã€‚

```js
//åä»£ç 
function createMicrobrewery(name) {
  const breweryName = name || "åŠªåŠ›å­¦ä¹ çš„æ±ª";
}
//å¥½ä»£ç 
function createMicrobrewery(name = "åŠªåŠ›å­¦ä¹ çš„æ±ª") {
  const breweryName = name 
}
```

### 9ã€ä¸è¦é“¾å¼å˜é‡èµ‹å€¼

###### **ä¸ºä»€ä¹ˆ? é“¾å¼å˜é‡èµ‹å€¼ä¼šåˆ›å»ºéšå¼å…¨å±€å˜é‡ã€‚**

```js
// åçš„å†™æ³•  --å¯¹äº const ä¹Ÿé€‚ç”¨,æ­¤å¤„ç”¨letè¿›è¡Œä¸¾ä¾‹
(function example() { //æ­¤å¤„ç”¨è‡ªæ‰§è¡Œå‡½æ•°å°ä¸€ä¸ªä½œç”¨åŸŸå‡ºæ¥
  /**
   JavaScript æŠŠå®ƒè§£é‡Šä¸º let a = ( b = ( c = 1 ) ); 
   let å…³é”®è¯åªé€‚ç”¨äºå˜é‡ a ï¼›å˜é‡ b å’Œå˜é‡ c åˆ™å˜æˆäº†å…¨å±€å˜é‡ã€‚
   */
  let a = b = c = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
}());

console.log(a); // throws ReferenceError
console.log(b); // 'åŠªåŠ›å­¦ä¹ çš„æ±ª'  åœ¨å¤–éƒ¨èƒ½è®¿é—®åˆ°å†…éƒ¨å£°æ˜çš„å˜é‡
console.log(c); // 'åŠªåŠ›å­¦ä¹ çš„æ±ª'

// å¥½çš„å†™æ³•
(function example() {
  let a = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
  let b = a;
  let c = a;
}());

console.log(a); // throws ReferenceError
console.log(b); // throws ReferenceError
console.log(c); // throws ReferenceError
```

 `let a = b = c = 1;`å®é™…ä¸Šåœ¨ **JavaScript** å¼•æ“ä¸­ä¼šè¢«æŒ‰ç…§è¿™æ ·çš„é¡ºåºæ‰§è¡Œ

```js
//é¦–å…ˆå£°æ˜
let a ;
//åˆ›å»ºäº†å…¨å±€å¯¹è±¡çš„å±æ€§  -- æ³¨æ„:æ˜¯åˆ›å»ºè€Œä¸æ˜¯å£°æ˜ è‡³äºä¸ºä»€ä¹ˆæ˜¯window? å› ä¸ºé¡¶å±‚å¯¹è±¡å°±æ˜¯window
window.b
window.c

//å¼€å§‹èµ‹å€¼,èµ‹å€¼é¡ºåºæ˜¯ä»å³è‡³å·¦
window.c = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
window.b = window.c;
a = window.b
```

### 10ã€é¿å…ä½¿ç”¨ä¸å¿…è¦çš„é€’å¢å’Œé€’å‡ (`++`, `--`)ã€‚

###### **ä¸ºä»€ä¹ˆ?** 

* åœ¨eslintæ–‡æ¡£ä¸­ï¼Œä¸€å…ƒé€’å¢å’Œé€’å‡è¯­å¥ä»¥è‡ªåŠ¨åˆ†å·æ’å…¥ä¸ºä¸»é¢˜ï¼Œå¹¶ä¸”åœ¨åº”ç”¨ç¨‹åºä¸­å¯èƒ½ä¼šå¯¼è‡´é»˜è®¤å€¼çš„é€’å¢æˆ–é€’å‡ã€‚
* å®ƒè¿˜å¯ä»¥ç”¨åƒ `num += 1` è¿™æ ·çš„è¯­å¥æ¥æ”¹å˜ä½ çš„å€¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `num++` æˆ– `num ++` ã€‚
* ä¸å…è®¸ä¸å¿…è¦çš„å¢é‡å’Œå‡é‡è¯­å¥ä¹Ÿä¼šä½¿ä½ æ— æ³•é¢„å…ˆé€’å¢/é¢„é€’å‡å€¼ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´ç¨‹åºä¸­çš„æ„å¤–è¡Œä¸ºã€‚

```js
// åçš„å†™æ³•
const array = [1, 2, 3];
let num = 1;
num++; //æ­¤å¤„å»ºè®®ç”¨  num += 1; çš„å†™æ³•
--num;

let sum = 0;
let truthyCount = 0;
//æ­¤å¤„ç”¨çš„ä¸¤ä¸ªå˜é‡ æ¥å¾ªç¯ç´¯åŠ è®°å½• sumã€truthyCount çš„å€¼
for (let i = 0; i < array.length; i++) {
  let value = array[i];
  sum += value;
  if (value) {
    truthyCount++;
  }
}


// å¥½çš„å†™æ³•
const array = [1, 2, 3];
let num = 1;
num += 1;
num -= 1;
//JSå®é™…ä¸Šç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šç›¸å…³ API ,çµæ´»åº”ç”¨èƒ½å‡å°‘æˆ‘ä»¬çš„å¼€å‘å·¥ä½œé‡çš„åŒæ—¶è¿˜èƒ½åˆ©äºæˆ‘ä»¬é˜…è¯»
const sum = array.reduce((a, b) = a + b, 0);
const truthyCount = array.filter(Boolean).length;
```

### 11ã€é¿å…åœ¨èµ‹å€¼è¯­å¥ `=` å‰åæ¢è¡Œ

###### **ä¸ºä»€ä¹ˆ? åœ¨ `=` å‰åæ¢è¡Œï¼Œå¯èƒ½ä¼šæ··æ·† èµ‹çš„å€¼**

```js
// åçš„å†™æ³•
const foo =
superLongLongLongLongLongLongLongLongFunctionName();

const foo
= 'superLongLongLongLongLongLongLongLongString';


// å¥½çš„å†™æ³•
const foo = (
superLongLongLongLongLongLongLongLongFunctionName()
);

const foo = 'superLongLongLongLongLongLongLongLongString';
```

## äºŒã€å‡½æ•°

### 1ã€å‡½æ•°å‚æ•° (ç†æƒ³æƒ…å†µä¸‹ä¸º 2 ä¸ªæˆ–æ›´å°‘)

1. é™åˆ¶å‡½æ•°å‚æ•°çš„æ•°é‡éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥æ›´è½»æ¾åœ°æµ‹è¯•ä½ çš„å‡½æ•°ã€‚è¶…è¿‡ä¸‰ä¸ªä¼šå¯¼è‡´ç»„åˆçˆ†ç‚¸ï¼Œä½ å¿…é¡»ç”¨æ¯ä¸ªå•ç‹¬çš„å‚æ•°æµ‹è¯•å¤§é‡ä¸åŒçš„æƒ…å†µã€‚
2. ä¸€ä¸¤ä¸ªå‚æ•°æ˜¯ç†æƒ³çš„æƒ…å†µï¼Œå¦‚æœå¯èƒ½ï¼Œåº”è¯¥é¿å…ä¸‰ä¸ªå‚æ•°ã€‚é™¤æ­¤ä¹‹å¤–çš„ä»»ä½•äº‹æƒ…éƒ½åº”è¯¥åˆå¹¶ã€‚é€šå¸¸ï¼Œå¦‚æœä½ æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œé‚£ä¹ˆä½ çš„å‡½æ•°å°±ä¼šå°è¯•åšå¤ªå¤šäº‹æƒ…ã€‚å¦‚æœä¸æ˜¯ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ›´é«˜çº§åˆ«çš„å¯¹è±¡å°±è¶³ä»¥ä½œä¸ºå‚æ•°ã€‚
3. ç”±äº JavaScript å…è®¸ä½ å³æ—¶åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ— éœ€å¤§é‡ç±»æ ·æ¿ï¼Œå› æ­¤å¦‚æœä½ å‘ç°è‡ªå·±éœ€è¦å¤§é‡å‚æ•°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¯¹è±¡ã€‚

ä¸ºäº†è®©å‡½æ•°æœŸæœ›çš„å±æ€§ä¸€ç›®äº†ç„¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ ES2015/ES6 è§£æ„è¯­æ³•ã€‚è¿™æœ‰å‡ ä¸ªä¼˜ç‚¹ï¼š

- å½“æœ‰äººæŸ¥çœ‹å‡½æ•°ç­¾åæ—¶ï¼Œä¼šç«‹å³æ¸…æ¥šæ­£åœ¨ä½¿ç”¨å“ªäº›å±æ€§ã€‚
- å®ƒå¯ç”¨äºæ¨¡æ‹Ÿå‘½åå‚æ•°ã€‚
- è§£æ„è¿˜ä¼šå…‹éš†ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°å¯¹è±¡çš„æŒ‡å®šåŸå§‹å€¼ã€‚è¿™å¯ä»¥å¸®åŠ©é˜²æ­¢å‰¯ä½œç”¨ã€‚æ³¨æ„ï¼šä»å‚æ•°å¯¹è±¡è§£æ„çš„å¯¹è±¡å’Œæ•°ç»„ä¸ä¼šè¢«å…‹éš†ã€‚
- Linter å¯ä»¥è­¦å‘Šä½ æœªä½¿ç”¨çš„å±æ€§ï¼Œè¿™åœ¨ä¸è§£æ„çš„æƒ…å†µä¸‹æ˜¯ä¸å¯èƒ½çš„ã€‚
- ç›¸å…³ç¬”è®° **[ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°](https://gitee.com/hongjilin/hongs-study-notes/tree/master/ç¼–ç¨‹_å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°/ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°)** 

```js
//åçš„ä»£ç 
function  createStudent ( className , name , buttonText , cancellable )  { /* ... */ } 
//ä¸å»ºè®®åˆ†ä¸ºå¤šä¸ªå‚æ•°ä¼ å…¥
createMenu ( "è½¯å·¥äºŒç­" ,  "åŠªåŠ›å­¦ä¹ çš„æ±ª" ,  "å˜å¸…" ,  true ) ;

//å¥½çš„ä»£ç 
//æ­¤å¤„ç”¨èµ‹å€¼è§£æ„æ–¹å¼å–å‡ºéœ€è¦çš„å˜é‡
function  createStudent ( { className , name , buttonText , cancellable } )  {  /* ... */} 
createStudent ( {  //è°ƒç”¨æ—¶ä¼ å…¥ä¸€ä¸ªå¯¹è±¡,é‡Œé¢è®²éœ€è¦çš„ä»£ç 
  className : "è½¯å·¥äºŒç­" , 
  name : "åŠªåŠ›å­¦ä¹ çš„æ±ª" , 
  buttonText : "å˜å¸…" , 
  cancellable : true 
});
```

### 2ã€å‡½æ•°åº”è¯¥åªåšä¸€ä»¶äº‹

**è¿™æ˜¯è¿„ä»Šä¸ºæ­¢è½¯ä»¶å·¥ç¨‹ä¸­æœ€é‡è¦çš„è§„åˆ™: **

* å½“å‡½æ•°åšä¸æ­¢ä¸€ä»¶äº‹æ—¶ï¼Œå®ƒä»¬æ›´éš¾ç»„åˆã€æµ‹è¯•å’Œæ¨ç†ã€‚
* å½“ä½ å¯ä»¥å°†ä¸€ä¸ªå‡½æ•°éš”ç¦»ä¸ºä¸€ä¸ªæ“ä½œæ—¶ï¼Œå®ƒå¯ä»¥è½»æ¾é‡æ„ï¼Œä½ çš„ä»£ç è¯»èµ·æ¥ä¼šæ›´æ¸…æ™°ã€‚

```js
//ä¸å¥½çš„ -- è¿™ä¸ªå‡½æ•°åšä¸¤ä»¶äº‹,ä½†ä¸¤ä»¶äº‹åˆæ— å…³è”,é‚£ä¹ˆä½ è¯¥æ€ä¹ˆå½¢å®¹è¿™ä¸ªå‡½æ•°? è¯»å–è¿˜æ˜¯å†™å…¥ç±»å‹å‡½æ•°?
const badFunction = () = {
  //è·å–æŸæ•°æ®è¯¦æƒ…,å¹¶å¯¹è·å¾—çš„ç»“æœè¿›è¡Œå¤„ç†
  const detil = await http.post('/store/detail', params);
  detil.then( /* ..... */ )

  //å‘é€æŸè¯·æ±‚,ä¾‹å¦‚æ·»åŠ æŸåç§°
  await http.post('/tag/add', {
    name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª'
  });
}

//å¥½çš„å†™æ³• -- è¿™æ ·æ­¤å‡½æ•°å°±æ˜¯ç”¨ä½œä¸“é—¨è°ƒç”¨,è¯¦ç»†çš„äº‹æƒ…å°±ç”±ä¸‹çº§ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«åš,å„å¸å…¶èŒ
const goodFunction = () = {
  getDetails();
  setName()
}

//è·å–æŸæ•°æ®è¯¦æƒ…,å¹¶å¯¹è·å¾—çš„ç»“æœè¿›è¡Œå¤„ç†
const getDetails = () = {
  const detil = await http.post('/store/detail', params);
  detil.then( /* ..... */ )
}
//å‘é€æŸè¯·æ±‚,ä¾‹å¦‚æ·»åŠ æŸåç§°
const setName = () = {
  await http.post('/tag/add', {
    name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª'
  });
}
```

### 3ã€å‡½æ•°åº”è¯¥åªæœ‰ä¸€å±‚æŠ½è±¡

###### **å½“ä½ æœ‰å¤šä¸ªæŠ½è±¡çº§åˆ«æ—¶ï¼Œä½ çš„å‡½æ•°é€šå¸¸åšå¾—å¤ªå¤šã€‚æ‹†åˆ†åŠŸèƒ½å¯¼è‡´å¯é‡ç”¨æ€§å’Œæ›´å®¹æ˜“çš„æµ‹è¯•**

```js
//ä¸å¥½çš„ä»£ç :
function parseBetterJSAlternative(code) {
  const REGEXES = ['åŠªåŠ›å­¦ä¹ çš„æ±ª','æ–°ç”Ÿä»£å†œæ°‘å·¥','hongjilin'];
  const statements = code.split(" ");
  const tokens = [];
  //é¦–å…ˆå¯¹ ä¼ å…¥å‚æ•°code è¿›è¡Œå¤„ç†,å¤„ç†åçš„ç»“æœèµ‹äºˆç»™ tokens  
  REGEXES.forEach(REGEX = {
    statements.forEach(statement = {
       tokens.push(/*...*/)
    });
  });

  const ast = [];
  //ç„¶åæˆ‘å†å¯¹ è¿›è¡Œè¿‡ä¸€æ¬¡å¤„ç†çš„ code å³ [tokens] è¿›è¡ŒäºŒæ¬¡å¤„ç†, èµ‹äºˆç»™ ast  
  tokens.forEach(token = {
    ast.push(/* ... */)
  });
 //å†ç„¶åæˆ‘å†å¯¹ [ast]	è¿›è¡Œå¤„ç†
  ast.forEach(node = {
    // parse...
  });
}

```

* å…ˆä¸è¯´å…¶ä»–çš„,å°±æˆ‘å·²ç»ç»™æ¯ä¸ªå¤„ç†éƒ½æ‰“ä¸Šäº†æ³¨é‡Š,é˜…è¯»ä»£ç æ—¶æ˜¯å¦ä»ç„¶è§‰å¾—è€¦åˆåº¦éå¸¸é«˜,éš¾ä»¥é˜…è¯»æˆ–è€…ä¿®æ”¹?
* æƒ³è±¡ä¸€ä¸‹,å°±è¿™ä¸ªä»£ç é•¿åº¦ç»™ä½  **Ã—3** ,ç„¶åè¯´å‡ºäº†ä¸€ä¸ªBUG,è®©ä½ è¿›è¡Œæ’é”™ä¿®æ”¹,æ˜¯ä¸æ˜¯è¡€å‹é«˜äº†èµ·æ¥?
* å†æƒ³è±¡ä¸€ä¸‹,å¦‚æœæ•´ä¸ªé¡¹ç›®éƒ½æ˜¯è¿™æ ·çš„ä»£ç ,è¿™æ—¶å€™æ¥äº†ä¸ªæ–°éœ€æ±‚,éœ€è¦åœ¨åŸæœ‰ä¸šåŠ¡ä¸Šè¿›è¡Œä¿®æ”¹,é‚£ä½ å¬åˆ°éœ€æ±‚çš„æ—¶å€™å†æƒ³ä¸€ä¸‹è¿™ä¸ªä»£ç  ???

```js
//å¥½çš„ä»£ç 
function parseBetterJSAlternative(code) {
  //æŠ½å‡ºåæˆ‘åªè¦æŒ‰é¡ºåºè°ƒç”¨å³å¯,ä»£ç ç»“æ„å˜å¾—æ¸…æ™°çš„åŒæ—¶ä¹Ÿå˜å¾—å®¹æ˜“é˜…è¯»ã€æ’é”™
  const tokens = tokenize(code); //è°ƒç”¨å¯¹äºcodeçš„ç¬¬ä¸€æ¬¡å¤„ç†
  const syntaxTree = parse(tokens); //è°ƒç”¨å¯¹äºcode çš„å°±ä¸€æ­¥å¤„ç†
  syntaxTree.forEach(node = {
    // parse...
  });
}

//1. å¯¹äº code ç¬¬ä¸€æ¬¡å¤„ç†,å¤„ç†æˆtokens
function tokenize(code) {
  const REGEXES = ['åŠªåŠ›å­¦ä¹ çš„æ±ª','æ–°ç”Ÿä»£å†œæ°‘å·¥','hongjilin'];
  const statements = code.split(" ");
  const tokens = [];
  REGEXES.forEach(REGEX = {
    statements.forEach(statement = {
      tokens.push(/* ... */);
    });
  });
  return tokens;
}
//2. å¯¹äº tokens çš„è¿›ä¸€æ­¥å¤„ç†
function parse(tokens) {
  const syntaxTree = [];
  tokens.forEach(token = {
    syntaxTree.push(/* ... */);
  });
  return syntaxTree;
}.
```

### 4ã€å‡½æ•°åç§°åº”è¯¥è¯´æ˜å®ƒä»¬çš„ä½œç”¨

```js
//ä¸å¥½çš„å†™æ³•
function  addToDate ( date ,  month )  { /* ... */ } 
const  date  =  new  Date ( ) ; 
//å¦‚æœè°ƒç”¨æ—¶è·ç¦»å‡½æ•°å®šä¹‰å¾ˆè¿œ,å…‰çœ‹è°ƒç”¨æ—¶çš„å‡½æ•°å æ˜¯ä¸æ˜¯å¾ˆéš¾çŒœå‡ºè¿™ä¸ªå‡½æ•°ã€è¿™ä¸ªå‚æ•°`1` åˆ†åˆ«éƒ½æ˜¯ä»€ä¹ˆä½œç”¨
addToDate ( date ,  1 ) ;

//å¥½çš„å†™æ³• 
function addMonthToDate(month, date) { /* ... */ } 
const date = new Date();
//è¿™é‡Œå³ä½¿ä¸çœ‹å‡½æ•°å®šä¹‰,ä»ç„¶èƒ½çŒœå¾—å‡ºè¿™ä¸ªå‡½æ•°å…·ä½“ä½œç”¨,å‚æ•°ä½œç”¨.
addMonthToDate(1, date);
```

å®é™…æŸ¥é˜…ä»£ç ä¸­, æœ€éš¾çš„å°±æ˜¯ä¸Šä¸‹æ–‡è¿‡é•¿,å®¹æ˜“å¿˜è®°æ¯ä¸ªå‡½æ•°å„è‡ªä½œç”¨,å¦‚æœèƒ½è¿™é‡Œæ˜äº†çš„ç»™å‡ºä½œç”¨,å¯¹äºåæ¥ç»´æŠ¤ä»£ç çš„åŒä¼´æ˜¯ååˆ†å‹å¥½çš„

### 5ã€é¿å…é‡å¤ä»£ç 

1. å°½æœ€å¤§åŠªåŠ›é¿å…é‡å¤ä»£ç ã€‚é‡å¤çš„ä»£ç æ˜¯ä¸å¥½çš„ï¼Œå› ä¸ºè¿™æ„å‘³ç€å¦‚æœä½ éœ€è¦æ”¹å˜ä¸€äº›è¿™é‡å¤ä»£ç å—çš„é€»è¾‘ï¼Œé‚£ä¹ˆä½ éœ€è¦åœ¨æ‰€æœ‰å¤åˆ¶äº†è¿™ä¸ªé‡å¤ä»£ç å—çš„åœ°æ–¹è¿›è¡Œä¿®æ”¹,è¿™æ„å‘³ç€ä½ å¯èƒ½å¾ˆå®¹æ˜“å‘ç”Ÿä¸å¯æ„æ–™çš„é”™è¯¯(æ‰‹æŠ–å¤šæ”¹æˆ–è€…é”™æ”¹)

2. å¾ˆå¤šæ—¶å€™ä½ æœ‰é‡å¤çš„ä»£ç æ˜¯å› ä¸ºä½ æœ‰ä¸¤ä¸ªæˆ–æ›´å¤šç¨å¾®ä¸åŒçš„ä¸œè¥¿

   - å®ƒä»¬æœ‰å¾ˆå¤šå…±åŒç‚¹ï¼Œ
   - ä½†å®ƒä»¬çš„ä¸åŒè¿«ä½¿ä½ æœ‰ä¸¤ä¸ªæˆ–æ›´å¤šç‹¬ç«‹çš„å‡½æ•°æ¥åšå¾ˆå¤šç›¸åŒçš„äº‹æƒ…
   - åˆ é™¤é‡å¤ä»£ç æ„å‘³ç€åˆ›å»ºä¸€ä¸ªæŠ½è±¡ï¼Œå®ƒå¯ä»¥åªç”¨ä¸€ä¸ªå‡½æ•°/æ¨¡å—/ç±»æ¥å¤„ç†è¿™ç»„ä¸åŒçš„äº‹æƒ…
   - å®é™…ä¸Šè¿™å°±åƒåœ¨Javaå­¦ä¹ è¿‡ç¨‹ä¸­åå¤å¼ºè°ƒçš„ **ç±»ä¸ç»§æ‰¿** éƒ¨åˆ†çŸ¥è¯†ç‚¹: æŠ½å‡ºä¸€ä¸ªçˆ¶ç±»(å…±åŒç‚¹),å¤šä¸ªå­ç±»ç»§æ‰¿çˆ¶ç±»çš„ç‰¹æ€§

3. å†™å‡ºæ­£ç¡®çš„æŠ½è±¡è‡³å…³é‡è¦

   - å…³äº **ç±»(class)** å°†åœ¨ä¸‹æ–¹å•ç‹¬åˆ—å‡ºå®ƒçš„è§„èŒƒ,æˆ‘ä»¬åº”è¯¥éµå®ˆå®ƒ .
   - **ç³Ÿç³•çš„æŠ½è±¡å¯èƒ½æ¯”é‡å¤çš„ä»£ç è¿˜è¦ç³Ÿç³•,æ‰€ä»¥è¦å°å¿ƒ!** 
   - è¯è™½å¦‚æ­¤,å¦‚æœèƒ½åšå‡ºå¥½çš„æŠ½è±¡,é‚£å°±å»åšå§! ä¸å¿… 'è®³ç–¾å¿ŒåŒ»',å°±å¦‚ä¸Šé¢æ‰€è¯´çš„: `ä¸è¦ä¸ºéœ€è¦æ”¹è¿›çš„åˆç¨¿è€Œè‡ªè´£ã€‚è€Œæ˜¯æ‰“è´¥ä»£ç ï¼` ä¸å¿…æ€•è‡ªå·±å†™ä¸å¥½æŠ½è±¡è€Œä¸å»å†™,è€Œæ˜¯åœ¨åå¤æ€è€ƒåå†™å‡ºå¿ƒé‡Œçš„ä»£ç ,è¿™æ ·æ‰èƒ½è¿›æ­¥
   - ä¸è¦é‡å¤è‡ªå·±,å¦åˆ™ä½ ä¼šå‘ç°è‡ªå·±åœ¨ä»»ä½•æ—¶å€™æƒ³è¦æ›´æ”¹ä¸€ä»¶äº‹æƒ…å°±ä¼šæ›´æ”¹å¤šä¸ªåœ°æ–¹

```js
//åçš„ä»£ç 
function showDeveloperList(developers) {
  developers.forEach(developer = {
    const expectedSalary = developer.calculateExpectedSalary();
    const experience = developer.getExperience();
    const githubLink = developer.getGithubLink(); 
    const data = {
      expectedSalary,
      experience,
      githubLink
    };

    render(data);
  });
}
//é‡å¤çš„ç¬¬äºŒä¸ªå‡½æ•°
function showManagerList(managers) {
  managers.forEach(manager = {
    const expectedSalary = manager.calculateExpectedSalary();
    //åªæœ‰æ­¤è¡Œä»£ç ä¸ä¸€æ ·,è€Œä¸”åœ¨ä¸å½±å“é‡å¤ä»£ç å—æ•ˆæœçš„æ—¶å€™,å¯èƒ½ä¸Šä¸‹æ–‡é¡ºåºæ˜¯ä¸åŒçš„,è¿™æ ·æ›´éš¾ä»¥æ’æŸ¥ä¿®æ”¹äº†
    const portfolio = manager.getMBAProjects(); 
    const experience = manager.getExperience();
    const data = {
      expectedSalary,
      experience,
      portfolio
    };

    render(data);
  });
}

```

å¦‚æœè¯´,æ­¤æ—¶è¦ä¿®æ”¹ä¸€ä¸ªé‡å¤éƒ¨åˆ†çš„ **expectedSalary** å¤„ç†æ–¹å¼,é‚£ä¹ˆæˆ‘å¦‚æœè¿™ä¸ªä»£ç å—é‡å¤äº†åæ¬¡,é‚£æˆ‘å°±éœ€è¦å»æ”¹10ä¸ªåœ°æ–¹,è€Œåœ¨å®é™…å¼€å‘ä¸­,æŸ¥æ‰¾è¿™äº›é‡å¤ä»£ç å—å¾€å¾€å¹¶ä¸å®¹æ˜“,ä¸‹é¢ç»™å‡ºå‡ ä¸ªæ¨èçš„å†™æ³•

```js
//å¥½çš„å†™æ³•ä¸€
function showEmployeeList(employees) {
  employees.forEach(employee = {
    const expectedSalary = employee.calculateExpectedSalary();
    const experience = employee.getExperience();
    const data = {
      expectedSalary,
      experience
    };
	//å°†é‡å¤çš„ä»£ç å—å†™åˆ°åŒä¸€ä¸ªå‡½æ•°ä¸­,é€šè¿‡åˆ¤æ–­å†³å®šä¸ä¸€æ ·çš„å¤„ç†æ–¹å¼
    switch (employee.type) {
      case "manager":
        data.portfolio = employee.getMBAProjects();
        break;
      case "developer":
        data.githubLink = employee.getGithubLink();
        break;
    }
    render(data);
  });
}

/****** ä¹Ÿå¯ä»¥è¿™æ ·å†™,æˆ–è€…ç”¨classç›¸å…³çŸ¥è¯†ç‚¹ä¹Ÿè¡Œ,ä¸‹é¢å†™æ³•ä¼˜äºä¸Šæ–¹ ******/

//è¿™æ˜¯é‡å¤ä»£ç å—,éœ€è¦çš„ç›´æ¥è°ƒç”¨å³å¯,éœ€è¦ä¿®æ”¹æ—¶åªè¦æ”¹æ­¤å¤„,è°ƒç”¨çš„åœ°æ–¹éƒ½ä¼šå—åˆ°æ”¹å˜
function showEmployeeList(employees) {
  employees.forEach(employee = {
    const expectedSalary = employee.calculateExpectedSalary();
    const experience = employee.getExperience();
    const data = {
      expectedSalary,
      experience
    };
    return data
  });
}
//åˆ†åˆ«åœ¨éœ€è¦çš„åœ°æ–¹è°ƒç”¨å³å¯
const showDeveloperList = (developers) ={
  let data = showEmployeeList(developers);
  data.githubLink = employee.getGithubLink();
  render(data);
}

const showManagerList = (managers) ={
  let data = showEmployeeList(managers);
  data.portfolio = employee.getMBAProjects();
  render(data);
}
```

å®é™…ä¸Šä¸åŒçš„åœºæ™¯æœ‰ä¸åŒçš„å†™æ³•,æ²¡æœ‰è¯´ä¸€å®šå¥½çš„å†™æ³•,æœ‰çš„åªæ˜¯æˆ‘ä»¬ç¨‹åºå‘˜å¯¹äºä»£ç è´¨é‡çš„è¿½æ±‚

### 6ã€ä¸è¦ä½¿ç”¨ flag ä½œä¸ºå‡½æ•°å‚æ•°

`flag`å‘Šè¯‰ä½ çš„ç”¨æˆ·è¿™ä¸ªå‡½æ•°åšçš„ä¸æ­¢ä¸€ä»¶äº‹ã€‚è€Œå‡½æ•°åº”è¯¥åªåšä¸€ä»¶äº‹ã€‚

1. å¦‚æœå‡½æ•°éµå¾ªåŸºäº `å¸ƒå°”å€¼` çš„ä¸åŒä»£ç è·¯å¾„ï¼Œå¯ä»¥å°è¯•æ‹†åˆ†å®ƒä»¬ã€‚
2. è¿™æ—¶ä½ å¯èƒ½æœ‰ç–‘æƒ‘äº†:ä¸Šé¢ [é¿å…é‡å¤ä»£ç ] ä¸­ä½¿ç”¨ switch ,ä¸ä¹Ÿç®—æ˜¯ä¸€ç§æ ‡è¯†å—?
   * é¦–å…ˆä»–ä¸æ˜¯ `å¸ƒå°”å€¼`, æ‰€ä»¥ä»–å¯èƒ½ä¼šæœ‰ç‰¹åˆ«å¤šçš„æƒ…å†µ,å¦‚æœä¸€ä¸€åˆ†å¼€åè€Œæ›´éš¾ä»¥æŸ¥é˜…,å¢åŠ è‡ªå·±å¼€å‘éš¾åº¦
   * å…¶æ¬¡,ç¡®å®èƒ½å¤Ÿ  `é¿å…æ¡ä»¶` å°±å°½é‡åº”é¿å…,è¯¦è§ä¸‹æ–¹  [é¿å…æ¡ä»¶](#14ã€é¿å…æ¡ä»¶) éƒ¨åˆ†
   * å¹¶ä¸æ˜¯ä¸€å®šè¦æ±‚ä¸èƒ½ä½¿ç”¨,åªæ˜¯è¯´èƒ½æƒ³å‡ºæ›´å¥½å†™æ³•çš„æƒ…å†µä¸‹ä½¿ç”¨æ›´å¥½çš„æƒ…å†µ,å¤§å¤šæ•°å‡½æ•°å‡ºç°éƒ½æ˜¯æœ‰å®ƒçš„éœ€æ±‚åœºæ™¯çš„

```js
//åä»£ç 
function createFile(name, temp) {
  if (temp) {
    fs.create(`./temp/${name}`);
  } else {
    fs.create(name);
  }
}

//å¥½ä»£ç   -- ä¸å†ä½¿ç”¨æ ‡è¯†åˆ¤æ–­,è€Œæ˜¯åœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨ä¸åŒå‡½æ•°
function createFile(name) {
  fs.create(name);
}

function createTempFile(name) {
  createFile(`./temp/${name}`);
}
```

### 7ã€ä½¿ç”¨ Object.assign è®¾ç½®é»˜è®¤å¯¹è±¡:crossed_swords:

###### çŸ¥è¯†ç‚¹è¡¥å……

`Object.assign()` æ–¹æ³•: ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡åˆ†é…åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚

ç¬¬äºŒä¸ªå‚æ•°,å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„å±æ€§å…·æœ‰ç›¸åŒçš„é”®ï¼Œåˆ™å±æ€§å°†è¢«æºå¯¹è±¡ä¸­çš„å±æ€§è¦†ç›–ã€‚åé¢çš„æºå¯¹è±¡çš„å±æ€§å°†ç±»ä¼¼åœ°è¦†ç›–å‰é¢çš„æºå¯¹è±¡çš„å±æ€§ã€‚  

###### ä¸å¥½çš„å†™æ³•

```js
const studentConfig = {
  occupation: null,
  name: "åŠªåŠ›å­¦ä¹ çš„æ±ª",
  buttonText: null,
  cancellable: true
};

function createStudent(config) {
  config.occupation = config.occupation || "å­¦ç”Ÿ";
  config.name = config.name || "hongjilin";
  config.buttonText = config.buttonText || "å˜å¸…";
   //æ­¤å¤„å¿…é¡»è¿™æ ·åˆ¤æ–­è€Œä¸æ˜¯ç›´æ¥ç”¨ || è¿›è¡Œé»˜è®¤èµ‹å€¼ å› ä¸º falseä¸undefined åœ¨é€»è¾‘è¿ç®—ç¬¦ä¸­çš„ç»“æœæ˜¯ä¸€æ ·çš„ 
  config.cancellable =
    config.cancellable !== undefined ?
    config.cancellable :
    true;
  return config
}

createStudent(studentConfig);
//{occupation: 'å­¦ç”Ÿ', name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª', buttonText: 'å˜å¸…', cancellable: true}
```

 å¦‚æœå¯¹äºä¸Šé¢ä»£ç çš„  [ cancellable ] é»˜è®¤èµ‹å€¼åˆ¤æ–­æ–¹å¼æ„Ÿè§‰åˆ°é™Œç”Ÿæˆ–è€…æ— æ³•ç†è§£çš„,å¯ä»¥çœ‹æœ¬äººæ•´ç†çš„è¿™ä¸ªç¬”è®° -- **[JSä¸­çš„é€»è¾‘è¿ç®—ç¬¦è¯¦è§£ç¬”è®°](https://gitee.com/hongjilin/hongs-study-notes/tree/master/ç¼–ç¨‹_å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°/HTML+CSS+JSåŸºç¡€ç¬”è®°/JavaScriptç¬”è®°/JSä¸­çš„é€»è¾‘è¿ç®—ç¬¦è¯¦è§£ç¬”è®°.md)** 

###### å¥½çš„å†™æ³•

```js
const studentConfig = {
  occupation: "ç°åœ¨æ˜¯ç¨‹åºå‘˜",
  // ç”¨æˆ·æ²¡æœ‰åŒ…å« 'name' é”®
  buttonText: "å˜ç§ƒ",
  cancellable: true
};

function createStudent(config) {
  let finalConfig = Object.assign({
      occupation: "æ›¾ç»æ˜¯å­¦ç”Ÿ",
      name: "åŠªåŠ›å­¦ä¹ çš„æ±ª",
      buttonText: "å˜å¸…",
      cancellable: true
    },
//ç¬¬äºŒä¸ªå‚æ•°,å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„å±æ€§å…·æœ‰ç›¸åŒçš„é”®ï¼Œåˆ™å±æ€§å°†è¢«æºå¯¹è±¡ä¸­çš„å±æ€§è¦†ç›–ã€‚åé¢çš„æºå¯¹è±¡çš„å±æ€§å°†ç±»ä¼¼åœ°è¦†ç›–å‰é¢çš„æºå¯¹è±¡çš„å±æ€§ã€‚   
    config
  );
  return finalConfig
}

createStudent(studentConfig);
//{occupation: 'ç°åœ¨æ˜¯ç¨‹åºå‘˜', name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª', buttonText: 'å˜ç§ƒ', cancellable: true}
```

### 9ã€é¿å…å‰¯ä½œç”¨

#### â…  - é¿å…å¸¸è§çš„å‰¯ä½œç”¨

1. å¦‚æœä¸€ä¸ªå‡½æ•°é™¤äº†æ¥å—ä¸€ä¸ªå€¼å¹¶è¿”å›å¦ä¸€ä¸ªæˆ–è€…å¤šä¸ªå€¼ä»¥å¤–çš„ä»»ä½•æ“ä½œ,éƒ½ä¼šäº§ç”Ÿå‰¯ä½œç”¨. 
2. å‰¯ä½œç”¨å¯èƒ½æ˜¯å†™å…¥æ–‡ä»¶ã€ä¿®æ”¹æŸäº›å…¨å±€å˜é‡ã€åˆæˆ–è€…æ˜¯å½±å“åˆ°äº†é¡µé¢æ¸²æŸ“ç­‰
3. ä½†æœ‰æ—¶æˆ‘ä»¬åˆç¡®å®éœ€è¦åœ¨ç¨‹åºä¸­äº§ç”Ÿå‰¯ä½œç”¨,å°±æ¯”å¦‚è¦å‘æŸä¸ªæ–‡ä»¶å†™å…¥æ•°æ®,é‚£ä¹ˆæˆ‘ä»¬åº”å½“æ³¨æ„ä¸è¦æœ‰å¤šä¸ªå†™å…¥ç‰¹å®šæ–‡ä»¶çš„å‡½æ•°æˆ–è€…ç±».å°½é‡ä¿è¯æœ‰ä¸”åªæœ‰ä¸€ä¸ª.
4. é‡ç‚¹æ˜¯é¿å…å¸¸è§çš„é™·é˜±,ä¾‹å¦‚:
   - åœ¨æ²¡æœ‰ä»»ä½•ç»“æ„çš„å¯¹è±¡ä¹‹é—´å…±äº«çŠ¶æ€
   - ä½¿ç”¨ä»»ä½•å¯ä»¥å†™å…¥çš„å¯å˜æ•°æ®ç±»å‹
   - ä»¥åŠä¸é›†ä¸­å‡ºç°å‰¯ä½œç”¨çš„ä½ç½®

###### åçš„å†™æ³•

```js
// ä»¥ä¸‹å‡½æ•°å¼•ç”¨çš„å…¨å±€å˜é‡ã€‚
// å¦‚æœæˆ‘ä»¬è¿è¡Œäº† è°ƒç”¨å¹¶åŠ å·¥è¿™ä¸ªå˜é‡ çš„å‡½æ•°, é‚£ä¹ˆå°±ä¼šäº§ç”Ÿä¸æƒ³è¦çš„å‰¯ä½œç”¨
let name = "ç›ç‘å„¿";
function splitIntoFirstAndLastName() {
  name = name+"çˆ±ä¸Šäº†åº·åº·"
}

console.log('è°ƒç”¨å‰çš„å…¨å±€',name);  //è°ƒç”¨å‰çš„å…¨å±€ ç›ç‘å„¿
splitIntoFirstAndLastName();
console.log('è°ƒç”¨åçš„å…¨å±€',name);  //è°ƒç”¨åçš„å…¨å±€ ç›ç‘å„¿çˆ±ä¸Šäº†åº·åº·  
//å¹¶ä¸”å¾€å æŸ¥çœ‹name éƒ½æ˜¯è¢«ä¿®æ”¹åçš„å€¼
```

###### å¥½çš„å†™æ³•

```js
function splitIntoFirstAndLastName(name) {
  return name+"çˆ±ä¸Šäº†åº·åº·"
}
const name = "ç›ç‘å„¿";
const newName = splitIntoFirstAndLastName(name);

console.log(name); // 'ç›ç‘å„¿';
console.log(newName); // ç›ç‘å„¿çˆ±ä¸Šäº†åº·åº·
//è¿™æ ·å°±èƒ½ä¸å½±å“åˆ°å…¶ä»–å˜é‡çš„åŒæ—¶å¾—åˆ°è‡ªå·±éœ€è¦çš„ç»“æœ
```

#### â…¡ - é¿å…å¯å˜å‚æ•°å‰¯ä½œç”¨

åœ¨ **JavaScript** ä¸­,æœ‰äº›å€¼æ˜¯ä¸å¯å˜çš„ã€æœ‰äº›æ˜¯å¯å˜çš„. å…¶ä¸­ **å¯¹è±¡å’Œæ•°ç»„æ˜¯ä¸¤ç§å¯å˜å€¼** . å› æ­¤åœ¨å°†å®ƒä»¬ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°è¦å°å¿ƒå¤„ç†.**JavaScript** å‡½æ•°å¯ä»¥æ›´æ”¹å¯¹è±¡çš„å±æ€§æˆ–æ›´æ”¹æ•°ç»„çš„å†…å®¹,è¿™å¾ˆå®¹æ˜“åœ¨å…¶ä»–åœ°æ–¹å¼•èµ·é”™è¯¯

##### a) ä¸¾ä¸ªğŸŒ°

å‡è®¾:æœ‰ä¸€ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªè¡¨ç¤ºè´­ç‰©è½¦çš„æ•°ç»„å‚æ•°. å¦‚æœè¯¥å‡½æ•°å¯¹äºè¯¥è´­ç‰©è½¦æ•°ç»„è¿›è¡Œäº†æ›´æ”¹:

* å‡è®¾ç°åœ¨æˆ‘ä»¬é¡¹ç›®çš„è´­ç‰©æµç¨‹æ˜¯: é€šè¿‡ `æ·»åŠ ` å‡½æ•°å°†è¦ä¹°çš„å•†å“åŠ å…¥è´­ç‰©è½¦,ç‚¹å‡» 'è´­ä¹°' å°†è´­ç‰©è½¦å•†å“å…¨éƒ¨ä¹°ä¸‹
* å¦‚:é€šè¿‡æ·»åŠ å‡½æ•°æ·»åŠ è¦è´­ä¹°çš„è€Œé¡¹ç›® -- é‚£ä¹ˆä½¿ç”¨ç›¸åŒ `cart` æ•°ç»„çš„ä»»ä½•å‡½æ•°éƒ½å°†æ”¶åˆ°æ­¤å‡½æ•°çš„å½±å“
* è¿™å¯èƒ½å¾ˆæ£’,ä½†ä¹Ÿå¯èƒ½é€ æˆå¾ˆç³Ÿç³•çš„åæœ

æˆ‘ä»¬æƒ³è±¡ä¸€ä¸ªBUGåœºæ™¯:

* ç”¨æˆ·ç‚¹å‡» 'è´­ä¹°' æŒ‰é’®,è¿™æ—¶å€™æˆ‘ä»¬äº§ç”Ÿç½‘ç»œè¯·æ±‚å¹¶å°† `cart` æ•°ç»„å‘é€åˆ°æœåŠ¡å™¨çš„å¤„ç†å‡½æ•°ä¸­
* ä½†å‡è®¾æˆ‘ä»¬ç½‘ç»œè¿æ¥ä¸è‰¯æˆ–è€…å› ä¸ºå…¶ä»–æƒ…å†µ,å¯¼è‡´æˆ‘ä»¬è¯·æ±‚å‡½æ•°ä¸æ–­é‡è¯•è¯·æ±‚
* è€Œåœ¨å®ƒé‡è¯•è¯·æ±‚çš„è¿‡ç¨‹ä¸­,å®¢æˆ·ç‚¹å‡»åˆ°äº†ä»–ä»¬å®é™…ä¸Šä¸æƒ³è¦çš„å•†å“çš„ 'æ·»åŠ è´­ç‰©è½¦'
* å› ä¸ºæˆ‘ä»¬æ·»åŠ å‡½æ•°æ˜¯ç›´æ¥æ“ä½œ `cart` æ•°ç»„,è¿™æ ·ä¼šå¯¼è‡´æ–°åŠ çš„å•†å“ä¼šç›´æ¥å¸¦åˆ°é‡æ–°å‘èµ·çš„è¯·æ±‚ä¸­

å½“ç„¶,å…·ä½“å¼€å‘è¿‡ç¨‹ä¸­ä¼šé‡åˆ°æ›´å¤šè´´åˆ‡ **å‰¯ä½œç”¨** çš„åœºæ™¯,è¿™é‡Œå…ˆæŒ‰ç…§è¿™ä¸ªåœºæ™¯è¿›è¡Œåˆ—ä¸¾

##### b) è§£å†³æ–¹å¼

ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯è®©`addItemToCart`å‡½æ•°å§‹ç»ˆå…‹éš† `cart`ã€ç¼–è¾‘å®ƒå¹¶è¿”å›å…‹éš†ã€‚è¿™å°†ç¡®ä¿ä»åœ¨ä½¿ç”¨æ—§è´­ç‰©è½¦çš„åŠŸèƒ½ä¸ä¼šå—åˆ°æ›´æ”¹çš„å½±å“ã€‚

- å¯èƒ½æœ‰äº›æƒ…å†µä¸‹ä½ ç¡®å®æƒ³è¦ä¿®æ”¹è¾“å…¥å¯¹è±¡ï¼Œä½†æ˜¯å½“ä½ é‡‡ç”¨è¿™ç§ç¼–ç¨‹å®è·µæ—¶ï¼Œä½ ä¼šå‘ç°è¿™äº›æƒ…å†µéå¸¸ç½•è§ã€‚å¤§å¤šæ•°ä¸œè¥¿éƒ½å¯ä»¥é‡æ„ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ï¼
- å°±æ€§èƒ½è€Œè¨€ï¼Œå…‹éš†å¤§å¯¹è±¡å¯èƒ½éå¸¸æ˜‚è´µã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™åœ¨å®è·µä¸­å¹¶ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Œå› ä¸ºæœ‰å¾ˆå¤šå¾ˆæ£’çš„åº“(å®é™…ä¸Šé…åˆES6å°±èƒ½åšåˆ°å¤§éƒ¨åˆ†æ“ä½œ)å¯ä»¥è®©è¿™ç§ç¼–ç¨‹æ–¹æ³•å˜å¾—æ›´å¿«ï¼Œè€Œä¸”ä¸ä¼šåƒæ‰‹åŠ¨å…‹éš†å¯¹è±¡å’Œæ•°ç»„é‚£æ ·å ç”¨å¤§é‡å†…å­˜ã€‚

##### c) ä»£ç ç¤ºä¾‹

```js
// cart is array
//ä¸å¥½çš„ä»£ç 
const addItemToCart = (cart, item) = {
  cart.push({ item, date: Date.now() });
};

//å¥½çš„ä»£ç 
const addItemToCart = (cart, item) = {
  return [...cart, { item, date: Date.now() }];
};
```

è¿™é‡Œè¿ç”¨åˆ°ES6çš„èµ‹å€¼è§£æ„ç›¸å…³çŸ¥è¯†ç‚¹,ä»æ˜¯ä¹‹å‰è¯´è¿‡çš„,ä¸æ‡‚çš„è¯·çœ‹  -- **[ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°](https://gitee.com/hongjilin/hongs-study-notes/tree/master/ç¼–ç¨‹_å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°/ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°)** 

#### â…¢ - é¿å…ä¸å¯å˜å‚æ•°çš„å‰¯ä½œç”¨

ä¸ºä»€ä¹ˆ? ä»–ä»¬å¾ˆå®¹æ˜“æ··æ·†ã€‚

```js
var b = 1;
// ä¸å¥½çš„å†™æ³•
function count(a = b++) {
  console.log(a);
}
count();  // 1
count();  // 2
count(3); // 3
count();  // 3
```

### 10ã€ä¸è¦å†™å…¥å…¨å±€å‡½æ•°

åœ¨ JavaScript ä¸­æ±¡æŸ“å…¨å±€å˜é‡æ˜¯ä¸€ç§ä¸å¥½çš„åšæ³•ï¼Œå› ä¸ºä½ å¯èƒ½ä¼šä¸å¦ä¸€ä¸ªåº“å‘ç”Ÿå†²çªï¼Œå¹¶ä¸”ä½ çš„ API çš„ç”¨æˆ·(æˆ–åŒäº‹)åœ¨ä»–ä»¬å¼€å‘ç”Ÿäº§ä¸­é‡åˆ°å¼‚å¸¸ä¹‹å‰å°†ä¸€æ— æ‰€çŸ¥ã€‚

è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªä¾‹å­ï¼š

* å¦‚æœä½ æƒ³æ‰©å±• JavaScript çš„åŸç”Ÿ Array æ–¹æ³•æ¥æ‹¥æœ‰ä¸€ä¸ª`diff`å¯ä»¥æ˜¾ç¤ºä¸¤ä¸ªæ•°ç»„ä¹‹é—´å·®å¼‚çš„æ–¹æ³•æ€ä¹ˆåŠï¼Ÿ
* ä½ å¯ä»¥å°†æ–°å‡½æ•°å†™å…¥`Array.prototype`ï¼Œä½†å®ƒå¯èƒ½ä¼šä¸å¦ä¸€ä¸ªè¯•å›¾åšåŒæ ·äº‹æƒ…çš„åº“å‘ç”Ÿå†²çªã€‚
* å¦‚æœå…¶ä»–åº“åªæ˜¯`diff`ç”¨æ¥æŸ¥æ‰¾æ•°ç»„çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ä¹‹é—´çš„å·®å¼‚æ€ä¹ˆåŠï¼Ÿ
* è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåªä½¿ç”¨ ES2015/ES6 ç±»å¹¶ç®€å•åœ°æ‰©å±•`Array`å…¨å±€ä¼šæ›´å¥½ã€‚

```js
//ä¸å¥½çš„å†™æ³•
Array.prototype.diff = function diff(comparisonArray) {
  const hash = new Set(comparisonArray);
  return this.filter(elem = !hash.has(elem));
};

//å¥½çš„å†™æ³•
class SuperArray extends Array {
  diff(comparisonArray) {
    const hash = new Set(comparisonArray);
    return this.filter(elem = !hash.has(elem));
  }
}
```

è¿™é‡Œè¿ç”¨åˆ°ES6çš„ Class ç›¸å…³çŸ¥è¯†ç‚¹,ä»æ˜¯ä¹‹å‰è¯´è¿‡çš„,ä¸æ‡‚çš„è¯·çœ‹  -- **[ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°](https://gitee.com/hongjilin/hongs-study-notes/tree/master/ç¼–ç¨‹_å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°/ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°)** 

### 11ã€æ¯”å‘½ä»¤å¼ç¼–ç¨‹åº”æ›´å€¾å‘äºå‡½æ•°å¼ç¼–ç¨‹

JavaScript ä¸åƒ Haskell é‚£æ ·æ˜¯ä¸€ç§å‡½æ•°å¼è¯­è¨€ï¼Œä½†å®ƒå…·æœ‰å‡½æ•°å¼çš„é£æ ¼ã€‚å‡½æ•°å¼è¯­è¨€å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æ˜“äºæµ‹è¯•ã€‚å°½å¯èƒ½æ”¯æŒè¿™ç§ç¼–ç¨‹é£æ ¼

###### è¿™é‡Œä¸¾ä¸ªç»Ÿè®¡ä»£ç è¡Œæ•°çš„æ —å­

```js
const programmerOutput = [
  {
    name: "åŠªåŠ›å­¦ä¹ çš„æ±ª",
    //æ²¡é”™,æˆªè‡³ç›®å‰,æœ¬äººç¬”è®°å·²ç»å¿«20Wè¡Œäº†
    linesOfCode: 200000  
  },
  {
    name: "æ–°ç”Ÿä»£å†œæ°‘å·¥",
    linesOfCode: 9999
  },
  {
    name: "hongjilin",
    linesOfCode: 150
  },
  {
    name: "æ´ªå¸…",
    linesOfCode: 1000
  }
];

//åçš„ä»£ç 
let totalOutput = 0;
for (let i = 0; i < programmerOutput.length; i++) {
  totalOutput += programmerOutput[i].linesOfCode;
}
//å¥½çš„ä»£ç 
const totalOutput = programmerOutput.reduce(
  (totalLines, output) = totalLines + output.linesOfCode,
  0
);
```

### 12ã€å»ºè®®å°è£…æ¡ä»¶

```js
//ä¸å¥½çš„å†™æ³•
if (fsm.state === "fetching" && isEmpty(listNode)) {}

//å»ºè®®çš„å†™æ³•
function shouldShowSpinner(fsm, listNode) { return fsm.state === "fetching" && isEmpty(listNode) }
if (shouldShowSpinner(fsmInstance, listNodeInstance)) {}
```

### 13ã€åº”é¿å…å¦å®šæ¡ä»¶

```js
function isDOMNodeNotPresent(node) {/*return Boolean*/ }
//ä¸æ¨èçš„å†™æ³•
if (!isDOMNodeNotPresent(node)) {}
//æ¨èçš„å†™æ³•
if (isDOMNodePresent(node)) {}
```

å®é™…å¼€å‘ä¸­æˆ‘å€’æ˜¯æŒºç»å¸¸ä½¿ç”¨è¿™ **ä¸æ¨èå†™æ³•** å› ä¸ºæŸäº›åœºæ™¯ä¸‹æ˜¯çœŸçš„æ–¹ä¾¿

### 14ã€é¿å…æ¡ä»¶

è¿™ä¼¼ä¹æ˜¯ä¸€é¡¹ä¸å¯èƒ½å®Œæˆçš„ä»»åŠ¡ã€‚

1. å¾ˆå¤šäººç¬¬ä¸€æ¬¡å¬åˆ°è¿™ä¸ªï¼Œéƒ½ä¼šè¯´ï¼š**ä¸è¯´å‡ºæ¥æ€ä¹ˆåŠ`if`ï¼Ÿ**
   * ç­”æ¡ˆæ˜¯: åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨å¤šæ€æ¥å®ç°ç›¸åŒçš„ä»»åŠ¡ã€‚
2. ç¬¬äºŒä¸ªé—®é¢˜é€šå¸¸æ˜¯: â€œ**è¿™å¾ˆå¥½ï¼Œä½†æˆ‘ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ**â€ 
   - ç­”æ¡ˆæ˜¯æˆ‘ä»¬ä¹‹å‰å­¦åˆ°çš„ä¸€ä¸ªå¹²å‡€çš„ä»£ç æ¦‚å¿µï¼š**ä¸€ä¸ªå‡½æ•°åº”è¯¥åªåšä¸€ä»¶äº‹**ã€‚
   - å½“ä½ æ‹¥æœ‰å¸¦æœ‰`if`è¯­å¥çš„ç±»å’Œå‡½æ•°æ—¶ï¼Œä½ å°±æ˜¯åœ¨å‘Šè¯‰ä½ çš„ç”¨æˆ·ä½ çš„å‡½æ•°åšäº†ä¸æ­¢ä¸€ä»¶äº‹ã€‚
   - è®°ä½ï¼Œåªåšä¸€ä»¶äº‹ã€‚

```js
//ä¸æ¨èçš„å†™æ³•
class Airplane {
  getCruisingAltitude() {
    switch (this.name) {
      case "åŠªåŠ›å­¦ä¹ çš„æ±ª":
        return this.getMaxAltitude() - this.getPassengerCount();
      case "æ–°ç”Ÿä»£å†œæ°‘å·¥":
        return this.getMaxAltitude();
      case "hongjilin":
        return this.getMaxAltitude() - this.getFuelExpenditure();
    }
  }
}

/********************   æ¨èçš„å†™æ³•   *******************************/
//çˆ¶ç±»
class Airplane {} 

class StudentDog extends Airplane {
  getCruisingAltitude() {
    return this.getMaxAltitude() - this.getPassengerCount();
  }
}

class PeasantWork extends Airplane {
  getCruisingAltitude() {
    return this.getMaxAltitude();
  }
}

class Hong extends Airplane {
  getCruisingAltitude() {
    return this.getMaxAltitude() - this.getFuelExpenditure();
  }
}
```

### 15ã€é¿å…æ£€æŸ¥ç±»å‹

#### â…  - ä¸¾ä¸ªğŸŒ°

* JavaScript æ˜¯æ— ç±»å‹çš„ï¼Œè¿™æ„å‘³ç€ä½ çš„å‡½æ•°å¯ä»¥æ¥å—ä»»ä½•ç±»å‹çš„å‚æ•°ã€‚
* æœ‰æ—¶ä½ ä¼šè¢«è¿™ç§è‡ªç”±æ‰€å›°æ‰°ï¼Œå¹¶ä¸”åœ¨ä½ çš„å‡½æ•°ä¸­è¿›è¡Œç±»å‹æ£€æŸ¥å˜å¾—å¾ˆè¯±äººã€‚æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥é¿å…è¿™æ ·åšã€‚
* é¦–å…ˆè¦è€ƒè™‘çš„æ˜¯ä¸€è‡´çš„ APIã€‚

```js
//ä¸å¥½çš„å†™æ³•
function travelToTexas(vehicle) {
  if (vehicle instanceof Bicycle) {
    vehicle.pedal(this.currentLocation, new Location("texas"));
  } else if (vehicle instanceof Car) {
    vehicle.drive(this.currentLocation, new Location("texas"));
  }
}
//å»ºè®®çš„å†™æ³• --å°½é‡å†™æˆä¸€ä¸ªä¸€è‡´çš„APIå‡½æ•°
function travelToTexas(vehicle) {
  vehicle.move(this.currentLocation, new Location("texas"));
}
```

#### â…¡ - å»ºè®®ä½¿ç”¨ TypeScript

å¦‚æœä½ æ­£åœ¨å¤„ç†åŸºæœ¬çš„åŸå§‹å€¼ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²å’Œæ•´æ•°ï¼Œå¹¶ä¸”ä½ ä¸èƒ½ä½¿ç”¨å¤šæ€æ€§ï¼Œä½†ä½ ä»ç„¶è§‰å¾—éœ€è¦è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œé‚£ä¹ˆä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨ TypeScriptã€‚

* å®ƒæ˜¯æ™®é€š JavaScript çš„ç»ä½³æ›¿ä»£å“ï¼Œå› ä¸ºå®ƒåœ¨æ ‡å‡† JavaScript è¯­æ³•ä¹‹ä¸Šä¸ºä½ æä¾›é™æ€ç±»å‹
* æ‰‹åŠ¨å¯¹æ™®é€š JavaScript è¿›è¡Œç±»å‹æ£€æŸ¥çš„é—®é¢˜åœ¨äºï¼Œåšå¾—å¥½éœ€è¦å¤ªå¤šé¢å¤–çš„æªè¾ï¼Œä»¥è‡³äºä½ è·å¾—çš„è™šå‡â€œç±»å‹å®‰å…¨â€å¹¶ä¸èƒ½å¼¥è¡¥å¤±å»çš„å¯è¯»æ€§ã€‚
* ä¿æŒ JavaScript å¹²å‡€ï¼Œç¼–å†™è‰¯å¥½çš„æµ‹è¯•ï¼Œå¹¶è¿›è¡Œè‰¯å¥½çš„ä»£ç å®¡æŸ¥ã€‚
* å¦‚æœæƒ³è¦äº†è§£ **TypeScript** ç›¸å…³çŸ¥è¯†ç‚¹,å¯ä»¥çœ‹æœ¬äººæ•´ç†çš„å¦ä¸€ä¸ªç¬”è®°  -- **[TypeScripç¬”è®°](https://gitee.com/hongjilin/hongs-study-notes/tree/master/ç¼–ç¨‹_å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°/TypeScripç¬”è®°)**

```ts
//ä¸å¥½çš„å†™æ³• --é€šè¿‡è‡ªå·±çš„æ‰‹åŠ¨ç±»å‹åˆ¤æ–­
function combine(val1, val2) {
  if (
    (typeof val1 === "number" && typeof val2 === "number") ||
    (typeof val1 === "string" && typeof val2 === "string")
  ) {
    return val1 + val2;
  }
  throw new Error("å¿…é¡»æ˜¯ String æˆ–è€… Number ç±»å‹");
}

//å¥½çš„å†™æ³•  -- å½“ä½ ä½¿ç”¨TSå,å¯ä»¥è¿™æ ·å†™è€Œä¸åšç±»å‹åˆ¤æ–­,å› ä¸ºTSä¼šå¸®ä½ åšåˆ¤æ–­,å¸®ä½ æå‰æœç»é”™è¯¯
function combine(val1, val2) {
  return val1 + val2;
}
```

### 16ã€åˆ é™¤æ­»ä»£ç 

æ­»ä»£ç å’Œé‡å¤ä»£ç ä¸€æ ·ç³Ÿç³•ã€‚æ²¡æœ‰ç†ç”±å°†å®ƒä¿ç•™åœ¨ä½ çš„ä»£ç åº“ä¸­ã€‚å¦‚æœå®ƒæ²¡æœ‰è¢«è°ƒç”¨ï¼Œæ‘†è„±å®ƒï¼å¦‚æœä½ ä»ç„¶éœ€è¦å®ƒï¼Œå®ƒåœ¨ä½ çš„ç‰ˆæœ¬å†å²è®°å½•ä¸­ (**Git**) ä»ç„¶æ˜¯å®‰å…¨å¯æ‰¾å›çš„

```js
//åºŸå¼ƒçš„å‡½æ•°,ä½†æˆ‘ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å¯èƒ½åˆä¼šè°ƒç”¨
//è°çŸ¥é“å‘¢? è¿™ä½ å¾—å»é—®å–„å˜çš„äº§å“ç»ç†äº†
function oldRequestModule(url) {/* ... */}

function newRequestModule(url) {/* ... */}

const req = newRequestModule('https://gitee.com/hongjilin');

```

 ä¸”ä¸è®ºæ²¡æ‰“æ³¨é‡Šå®¹æ˜“æ··æ·†,å°±è¯´ç°åœ¨è¿™æ ·æ‰“ä¸Šæ³¨é‡Š,å°±ä¸ä¼šå½±å“æˆ‘ä»¬é˜…è¯»ä»£ç å—? 

```js
//å¥½çš„å†™æ³•
function newRequestModule(url) {/* ... */}
const req = newRequestModule('https://gitee.com/hongjilin');
```

å¦‚æœæƒ³äº†è§£ç‰ˆæœ¬å†å²è®°å½•æ€ä¹ˆä½¿ç”¨, é‚£ä¹ˆæ¨èå¯ä»¥çœ‹æœ¬äººå¦ä¸€ä¸ªçŸ¥è¯†ç‚¹ç¬”è®°  -- **[Gitå­¦ä¹ ç¬”è®°](https://gitee.com/hongjilin/hongs-study-notes/tree/master/ç¼–ç¨‹_å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°/Gitå­¦ä¹ ç¬”è®°)** 

### 17ã€ä½¿ç”¨å‘½åçš„å‡½æ•°è¡¨è¾¾å¼ä»£æ›¿å‡½æ•°å£°æ˜

###### **ä¸ºä»€ä¹ˆ?** 

* å‡½æ•°å£°æ˜æ˜¯æŒ‚èµ·çš„ï¼Œè¿™æ„å‘³ç€åœ¨å®ƒåœ¨æ–‡ä»¶ä¸­å®šä¹‰ä¹‹å‰ï¼Œå¾ˆå®¹æ˜“å¼•ç”¨å‡½æ•°ã€‚è¿™ä¼šæŸå®³å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
* å¦‚æœä½ å‘ç°å‡½æ•°çš„å®šä¹‰æ˜¯å¤§çš„æˆ–å¤æ‚çš„ï¼Œä»¥è‡³äºå®ƒå¹²æ‰°äº†å¯¹æ–‡ä»¶çš„å…¶ä½™éƒ¨åˆ†çš„ç†è§£ï¼Œé‚£ä¹ˆä¹Ÿè®¸æ˜¯æ—¶å€™å°†å®ƒæå–åˆ°å®ƒè‡ªå·±çš„æ¨¡å—ä¸­äº†!
* ä¸è¦å¿˜è®°æ˜¾å¼åœ°å‘½åè¿™ä¸ªè¡¨è¾¾å¼ï¼Œä¸ç®¡å®ƒçš„åç§°æ˜¯å¦ä»åŒ…å«å˜é‡(åœ¨ç°ä»£æµè§ˆå™¨ä¸­ç»å¸¸æ˜¯è¿™æ ·ï¼Œæˆ–è€…åœ¨ä½¿ç”¨è¯¸å¦‚Babelä¹‹ç±»çš„ç¼–è¯‘å™¨æ—¶)ã€‚
* è¿™æ¶ˆé™¤äº†å¯¹é”™è¯¯çš„è°ƒç”¨å †æ ˆçš„ä»»ä½•å‡è®¾

```js
//ä¸æ¨èçš„å†™æ³•
function foo() {/** ... */}

const foo = function () {/** ... */}

// æ¨èçš„å†™æ³•
// ä»å˜é‡å¼•ç”¨è°ƒç”¨ä¸­åŒºåˆ†çš„è¯æ±‡åç§°
const short = function longUniqueMoreDescriptiveLexicalFoo() {/** ... */ }
```

### 18ã€å…³äº  `arguments` å‚æ•°

#### â…  - æ°¸è¿œä¸è¦å®šä¹‰ä¸€ä¸ªå‚æ•°ä¸º `arguments`

###### æ°¸è¿œä¸è¦å®šä¹‰ä¸€ä¸ªå‚æ•°ä¸º `arguments`ã€‚ è¿™å°†ä¼šä¼˜å…ˆäºæ¯ä¸ªå‡½æ•°ç»™å®šèŒƒå›´çš„ `arguments` å¯¹è±¡ã€‚

```js
// bad
function foo(name, options, arguments) {/** ... */ }

// good
function foo(name, options, args) {/** ... */ }
```

#### â…¡ - å»ºè®®ä¸è¦ä½¿ç”¨ `arguments`, è€Œæ˜¯é€‰æ‹©ä½¿ç”¨ rest è¯­æ³• `...` ä»£æ›¿

 ###### ä¸ºä»€ä¹ˆ? `...` æ˜ç¡®äº†ä½ æƒ³è¦æ‹‰å–ä»€ä¹ˆå‚æ•°ã€‚ æ›´ç”š, rest å‚æ•°æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼Œè€Œä¸ä»…ä»…æ˜¯ç±»æ•°ç»„çš„ `arguments` ã€‚

```js
// bad
function concatenateAll() {
  const args = Array.prototype.slice.call(arguments);
  return args.join('');
}

// good
function concatenateAll(...args) {
  return args.join('');
}
```

### 19ã€å…³äºé»˜è®¤å‚æ•°

#### â…  - ä½¿ç”¨é»˜è®¤çš„å‚æ•°è¯­æ³•ï¼Œè€Œä¸æ˜¯æ”¹å˜å‡½æ•°å‚æ•°

```js
//ä¸å¥½çš„å†™æ³•
function handleThings(opts) {
  // ä¸ï¼æˆ‘ä»¬ä¸åº”è¯¥æ”¹å˜å‡½æ•°å‚æ•°ã€‚
  // åŒé‡é”™è¯¯ï¼šå¦‚æœ opts ä¸ºå‡ï¼Œå®ƒå°†è¢«è®¾ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯èƒ½è¿™æ˜¯ä½ æƒ³è¦çš„ï¼Œä½†å®ƒå¯èƒ½ä¼šå¼•å…¥ç»†å¾®çš„é”™è¯¯ã€‚
  opts = opts || {};
}

//æ¨èçš„å†™æ³•
å‡½æ•° handleThings ( opts  =  { } )  { /* ... */ }
```

#### â…¡ - å»ºè®®æŠŠé»˜è®¤å‚æ•°æ”¾åœ¨æœ€å

```js
// bad
function handleThings(opts = {}, name) { /* ... */ }

// good
function handleThings(name, opts = {}) { /* ... */ }
```

### 20ã€ä¸è¦ä½¿ç”¨å‡½æ•°æ„é€ å™¨æ¥åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°

 ###### ä¸ºä»€ä¹ˆ? ä»¥è¿™ç§æ–¹å¼åˆ›å»ºä¸€ä¸ªå‡½æ•°å°†å¯¹ä¸€ä¸ªç±»ä¼¼äº `eval()` çš„å­—ç¬¦ä¸²è¿›è¡Œè®¡ç®—ï¼Œè¿™å°†æ‰“å¼€æ¼æ´ã€‚

```js
// ä¸å¥½çš„å†™æ³•
var add = new Function('a', 'b', 'return a + b');

// ä¹Ÿæ˜¯ä¸å¥½çš„å†™æ³•
var subtract = Function('a', 'b', 'return a - b');
```

### 21ã€å‡½æ•°ç­¾åæ ¼å¼æ³¨æ„

#### â…  - æ³¨æ„å‡½æ•°ç­¾åä¸­çš„é—´è·

 ###### ä¸ºä»€ä¹ˆ? ä¸€è‡´æ€§å¾ˆå¥½ï¼Œåœ¨åˆ é™¤æˆ–æ·»åŠ åç§°æ—¶ä¸éœ€è¦æ·»åŠ æˆ–åˆ é™¤ç©ºæ ¼ã€‚

```js
// bad
const f = function(){};
const g = function (){};
const h = function() {};

// good
const x = function () {};
const y = function a() {};
```

#### â…¡ - å…·æœ‰å¤šè¡Œç­¾åæˆ–è€…è°ƒç”¨çš„å‡½æ•°çš„æ ¼å¼æ³¨æ„

 ###### å…·æœ‰å¤šè¡Œç­¾åæˆ–è€…è°ƒç”¨çš„å‡½æ•°åº”è¯¥åƒæœ¬æŒ‡å—ä¸­çš„å…¶ä»–å¤šè¡Œåˆ—è¡¨ä¸€æ ·ç¼©è¿›ï¼šåœ¨ä¸€è¡Œä¸Šåªæœ‰ä¸€ä¸ªæ¡ç›®ï¼Œå¹¶ä¸”æ¯ä¸ªæ¡ç›®æœ€ååŠ ä¸Šé€—å·

```js
// bad
function foo(bar,
             baz,
             quux) {
  // ...
}

// good
function foo(
  bar,
  baz,
  quux,
) {
  // ...
}

// bad
console.log(foo,
  bar,
  baz);

// å¥½çš„å†™æ³•
console.log(
  foo,
  bar,
  baz,
);
```

------



## ä¸‰ã€ç®­å¤´å‡½æ•°

### 1ã€å½“ä½ å¿…é¡»ä½¿ç”¨åŒ¿åå‡½æ•°æ—¶ (å½“ä¼ é€’å†…è”å‡½æ•°æ—¶)ï¼Œ ä½¿ç”¨ç®­å¤´å‡½æ•°

###### **ä¸ºä»€ä¹ˆ?** 

 å®ƒåˆ›å»ºäº†ä¸€ä¸ªåœ¨ `this` ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œçš„å‡½æ•°ç‰ˆæœ¬ï¼Œå®ƒé€šå¸¸æ˜¯ä½ æƒ³è¦çš„ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªæ›´ç®€æ´çš„è¯­æ³•

###### ä»€ä¹ˆæƒ…å†µä¸ä½¿ç”¨?

 å¦‚æœä½ æœ‰ä¸€ä¸ªç›¸å½“å¤æ‚çš„å‡½æ•°ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªé€»è¾‘è½¬ç§»åˆ°å®ƒè‡ªå·±çš„å‘½åå‡½æ•°è¡¨è¾¾å¼ä¸­

```js
// ä¸æ¨èçš„å†™æ³•
[1, 2, 3].map(function (x) {
  const y = x + 1;
  return x * y;
});

// æ¨èçš„å†™æ³•
[1, 2, 3].map((x) = {
  const y = x + 1;
  return x * y;
});
```

### 2ã€æ‹¬å· ä¸ return çš„çœç•¥

å¦‚æœå‡½æ•°ä½“åŒ…å«ä¸€ä¸ªå•ç‹¬çš„è¯­å¥ï¼Œè¿”å›ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„ [expression](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Expressions) ï¼Œ çœç•¥æ‹¬å·å¹¶ä½¿ç”¨éšå¼è¿”å›ã€‚å¦åˆ™ï¼Œä¿ç•™æ‹¬å·å¹¶ä½¿ç”¨ `return` è¯­å¥

 ###### **ä¸ºä»€ä¹ˆ? è¯­æ³•ç³–ã€‚ å¤šä¸ªå‡½æ•°è¢«é“¾æ¥åœ¨ä¸€èµ·æ—¶ï¼Œæé«˜å¯è¯»æ€§**

```js
// ä¸æ¨èçš„å†™æ³•
[1, 2, 3].map(number = {
  const nextNumber = number + 1;
  `A string containing the ${nextNumber}.`;
});

// æ¨èçš„å†™æ³•  -- åªæœ‰ä¸€ä¸ªå•ç‹¬çš„è¯­å¥,å¯ä»¥çœç•¥returnä¸ä¸­æ‹¬å· ç›´æ¥è¿”å›
[1, 2, 3].map(number = `A string containing the ${number}.`);

// æ¨èçš„å†™æ³•
[1, 2, 3].map((number) = {
  const nextNumber = number + 1;
  return `A string containing the ${nextNumber}.`;
});

/*******************  è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶  *****************************/
// æ¨èçš„å†™æ³• 
[1, 2, 3].map((number, index) = ({
  [index]: number,
}));

// æ²¡æœ‰å‰¯ä½œç”¨çš„éšå¼è¿”å›
function foo(callback) {
  const val = callback();
  if (val === true) {
    // å¦‚æœå›è°ƒè¿”å› true æ‰§è¡Œ
  }
}

/************** å½“fooä¸ºæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°,åªæ˜¯å¯¹äºæŸå˜é‡è¿›è¡Œå¤„ç†æ—¶    ***************************/
let bool = false;
// ä¸æ¨èçš„å†™æ³•  
foo(() = bool = true);

// æ¨èçš„å†™æ³•
foo(() = {
  bool = true;
});
```

### 3ã€å¦‚æœè¡¨è¾¾å¼è·¨è¶Šå¤šä¸ªè¡Œï¼Œç”¨æ‹¬å·å°†å…¶æ‹¬èµ·æ¥ï¼Œä»¥è·å¾—æ›´å¥½çš„å¯è¯»æ€§

 ###### **ä¸ºä»€ä¹ˆ? å®ƒæ¸…æ¥šåœ°æ˜¾ç¤ºäº†å‡½æ•°çš„èµ·ç‚¹å’Œç»ˆç‚¹**

```js
// ä¸æ¨è
['get', 'post', 'put'].map(httpMethod = Object.prototype.hasOwnProperty.call(
    httpMagicObjectWithAVeryLongName,
    httpMethod,
  )
);

// æ¨èçš„
['get', 'post', 'put'].map(httpMethod = (
  Object.prototype.hasOwnProperty.call(
    httpMagicObjectWithAVeryLongName,
    httpMethod,
  )
));
```

### 4ã€å¦‚æœä½ çš„å‡½æ•°åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œåˆ™å¯ä»¥ä¸ç”¨æ‹¬å·ï¼Œçœç•¥æ‹¬å·

å¦‚æœä½ çš„å‡½æ•°åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œåˆ™å¯ä»¥ä¸ç”¨æ‹¬å·ï¼Œçœç•¥æ‹¬å·ã€‚ å¦åˆ™ï¼Œä¸ºäº†ä¿è¯æ¸…æ™°å’Œä¸€è‡´æ€§ï¼Œéœ€è¦åœ¨å‚æ•°å‘¨å›´åŠ ä¸Šæ‹¬å·ã€‚ æ³¨æ„ï¼šæ€»æ˜¯ä½¿ç”¨æ‹¬å·æ˜¯å¯ä»¥æ¥å—çš„

###### **ä¸ºä»€ä¹ˆ? å‡å°‘è§†è§‰ä¸Šçš„æ··ä¹±**

```js
// bad
[1, 2, 3].map((x) = x * x);
// bad
[1, 2, 3].map(x = {
  const y = x + 1;
  return x * y;
});

/***************  ä¸‹é¢æ˜¯æ¨èçš„å†™æ³•  ************************/
// good
[1, 2, 3].map(x = x * x);

// good
[1, 2, 3].map(number = (
  `ä¸€ä¸ªå¸¦æœ‰${number}çš„é•¿å­—ç¬¦ä¸²å®ƒå¤ªé•¿äº†ï¼Œä»¥è‡³äºæˆ‘ä»¬ä¸å¸Œæœ›å®ƒå æ®.mapè¡Œä¸Šçš„ç©ºé—´!`
));

// good
[1, 2, 3].map((x) = {
  const y = x + 1;
  return x * y;
});
```

### 5ã€é¿å…ç®­å¤´å‡½æ•°ç¬¦å· (`=`) å’Œæ¯”è¾ƒè¿ç®—ç¬¦ (`<=`, `=`) çš„æ··æ·†

ä¹Ÿè®¸ä»£ç è¿è¡Œæ•ˆæœæ˜¯ä¸€æ ·çš„,ä½†æ˜¯å¯é˜…è¯»æ€§å®Œå…¨ä¸ä¸€æ ·

```js
// bad
const itemHeight = item = item.height  256 ? item.largeSize : item.smallSize;

// bad
const itemHeight = (item) = item.height  256 ? item.largeSize : item.smallSize;

// good
const itemHeight = item = (item.height  256 ? item.largeSize : item.smallSize);

// good
const itemHeight = (item) = {
  const { height, largeSize, smallSize } = item;
  return height  256 ? largeSize : smallSize;
};
```

### 6ã€æ³¨æ„å¸¦æœ‰éšå¼è¿”å›çš„ç®­å¤´å‡½æ•°å‡½æ•°ä½“çš„ä½ç½®

```js
//ä¸æ¨èçš„
(foo) =  
  bar;

(foo) =
  (bar);


// æ¨èçš„
(foo) = bar;
(foo) = (bar);
(foo) = (
   bar
)
```

## å››ã€å¯¹è±¡

### 1ã€ä½¿ç”¨å­—é¢è¯­æ³•æ¥åˆ›å»ºå¯¹è±¡

```js
// éº»çƒ¦çš„
const item = new Object();

// æ¨èçš„
const item = {};
```

### 2ã€åœ¨åˆ›å»ºå…·æœ‰ åŠ¨æ€å±æ€§åç§° çš„å¯¹è±¡ æ—¶ä½¿ç”¨è®¡ç®—å±æ€§å

 ###### **ä¸ºä»€ä¹ˆ? å®ƒå…è®¸ä½ åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰å¯¹è±¡çš„æ‰€æœ‰å±æ€§**

```js
//å£°æ˜ä¸€ä¸ªèƒ½åŠ¨æ€è¿”å›å±æ€§åçš„å‡½æ•°
function getKey(k) {
  return `è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€å±æ€§åç§°-${k}`;
}

// ä¸æ¨èçš„å†™æ³•
const obj = {
  id: 5,
  name: 'hongjilin',
};
obj[getKey('handsome')] = true;

// æ¨èå†™æ³•
const goodObj = {
  id: 6,
  name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª',
  [getKey('handsome')]: true,
};
// {id: 6, name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª', è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€å±æ€§åç§°-handsome: true}
```

### 3ã€ä½¿ç”¨å¯¹è±¡æ–¹æ³•çš„ç¼©å†™

 ###### **å¯ä»¥å‡å°‘æˆ‘ä»¬ä»£ç é‡çš„åŒæ—¶,ä¹Ÿèƒ½ä½¿å¾—æˆ‘ä»¬çš„ä»£ç çœ‹èµ·æ¥æ›´å¹²å‡€**

```js
// ä¸æ¨èçš„
const atom = {
  value: 1,
  addValue: function (value) {
    return atom.value + value;
  },
};

//æ¨èçš„
const atom = {
  value: 1,
  //è¿™é‡Œå¯ä»¥ä½¿ç”¨ç¼©å†™
  addValue(value) {  
    return atom.value + value;
  },
};
```

### 4ã€å¯¹è±¡å±æ€§å€¼çš„ç¼©å†™

#### â…  - å»ºè®®ä½¿ç”¨å±æ€§å€¼çš„ç¼©å†™

 ###### **ä¸ºä»€ä¹ˆ?  è¿™æ˜¯è¯­æ³•ç³–,å®ƒçš„å†™æ³•å’Œæè¿°è¾ƒçŸ­**

```js
const userName = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';

// ä¸æ¨èçš„
const obj = {
  userName: userName,
};

// æ¨èçš„
const obj = {
  userName,
};
```

#### â…¡ - åœ¨å¯¹è±¡å£°æ˜çš„æ—¶å€™å°†ç®€å†™çš„å±æ€§æ”¾åœ¨ä¸€èµ·

 ###### **ä¸ºä»€ä¹ˆ? è¿™æ ·æ›´å®¹æ˜“çš„åˆ¤æ–­å“ªäº›å±æ€§ä½¿ç”¨äº†ç®€å†™**

```js
const userName = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
const occupation = 'æ–°ç”Ÿä»£å†œæ°‘å·¥';

// ä¸æ¨èçš„å†™æ³•
const obj = {
  handsome: true,
  occupation,
  age: 23,
  sex: 'ç”·',
  userName,
};

// æ¨èçš„å†™æ³•
const obj = {
  userName,
  occupation,
  handsome: true,
  age: 23,
  sex: 'ç”·',
};
```

### 5ã€åªä½¿ç”¨å¼•å·æ ‡æ³¨æ— æ•ˆæ ‡è¯†ç¬¦çš„å±æ€§

###### **ä¸ºä»€ä¹ˆ? æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™æ ·æ›´å®¹æ˜“é˜…è¯»ã€‚ å®ƒæå‡äº†è¯­æ³•é«˜äº®æ˜¾ç¤ºï¼Œå¹¶ä¸”æ›´å®¹æ˜“é€šè¿‡è®¸å¤š JS å¼•æ“ä¼˜åŒ–**

ä»€ä¹ˆæ˜¯æ— æ•ˆæ ‡è¯†ç¬¦? åƒæ˜¯è¿™ç§å¸¦ç€ `-` ,è¿™ç§ç¬¦å·çš„å°±å¯ä»¥è¯´æ˜¯æ— æ•ˆæ ‡è¯†ç¬¦ 

```js
// ä¸æ¨èçš„
const bad = {
  'name': 'åŠªåŠ›å­¦ä¹ çš„æ±ª',
  'age': 3,
  'data-blah': 666,
};

// æ¨èçš„
const good = {
  name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª',
  age: 3,
  'data-blah': 666,
};
```

### 6ã€å»ºè®®ä¸è¦ç›´æ¥è°ƒç”¨  Object.prototype ä¸Šçš„æ–¹æ³•

ä¸èƒ½ç›´æ¥è°ƒç”¨ `Object.prototype` çš„æ–¹æ³•ï¼Œå¦‚ï¼š `hasOwnProperty` ã€ `propertyIsEnumerable` å’Œ `isPrototypeOf`ã€‚

 ###### **ä¸ºä»€ä¹ˆ? è¿™äº›æ–¹æ³•å¯èƒ½è¢«ä»¥ä¸‹é—®é¢˜å¯¹è±¡çš„å±æ€§è¿½è¸ª**

 * ç›¸åº”çš„æœ‰ `{ hasOwnProperty: false }` - æˆ–è€…ï¼Œå¯¹è±¡æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ (`Object.create(null)`)ã€‚
 * è¿™æ—¶å€™åŸºç¡€ä¸å¤ªå¥½çš„åŒå­¦å¯èƒ½å°±æœ‰ç‚¹æ— æ³•ç†è§£äº†,ä½†æ˜¯æ²¡å…³ç³»,ä¸‹é¢æˆ‘ä¼šç»™å‡ºç¤ºä¾‹

```js
// bad
console.log(object.hasOwnProperty(key));

// good
console.log(Object.prototype.hasOwnProperty.call(object, key));

// best
const has = Object.prototype.hasOwnProperty; // åœ¨æ¨¡å—èŒƒå›´å†…çš„ç¼“å­˜ä¸­æŸ¥æ‰¾ä¸€æ¬¡,ç„¶åå†å»è°ƒç”¨
```

###### æˆªå›¾ç¤ºä¾‹

![image-20211008110248531](JavaScript%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83.assets/image-20211008110248531.png)

å¦‚æœè¯´ä½ çœ‹ç€æˆªå›¾ç¤ºä¾‹è¿˜ä¸æ‡‚ æˆ–è€… è¯´ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šå‡ºç°å›¾ä¸­çš„é—®é¢˜çš„è¯ 
è¯´æ˜å’±åŸºç¡€ä¸å¤Ÿç‰¢å›ºå“¦,è¿˜æ˜¯è¦å›å»è¡¥å……ä¸€ä¸‹JSåŸºç¡€,ä¹Ÿå¯ä»¥çœ‹æœ¬äººç¬”è®° -- **[JavaScriptç¬”è®°](https://gitee.com/hongjilin/hongs-study-notes/tree/master/ç¼–ç¨‹_å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°/HTML+CSS+JSåŸºç¡€ç¬”è®°/JavaScriptç¬”è®°)**

### 7ã€åº”è¯¥æ›´å€¾å‘äºç”¨å¯¹è±¡æ‰©å±•æ“ä½œç¬¦

åº”è¯¥æ›´å€¾å‘äºç”¨è±¡æ‰©å±•æ“ä½œç¬¦ (ES6ä¸­çŸ¥è¯†ç‚¹) , è€Œä¸æ˜¯ç”¨ [`Object.assign`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign) æµ…æ‹·è´ä¸€ä¸ªå¯¹è±¡ã€‚ ä½¿ç”¨å¯¹è±¡çš„ rest æ“ä½œç¬¦æ¥è·å¾—ä¸€ä¸ªå…·æœ‰æŸäº›å±æ€§çš„æ–°å¯¹è±¡ã€‚

```js
/**************  éå¸¸ç³Ÿç³•çš„  **********************/
const original = { a: 1, b: 2 };
// å˜å¼‚çš„ `original` à² _à² ; 
const copy = Object.assign(original, { c: 3 }); 
//è¿™é‡Œåˆ é™¤äº† copy çš„ a å±æ€§ å´åŒæ—¶ä¹Ÿä¼šåˆ é™¤ original çš„ a å±æ€§
delete copy.a;   


/**************  ä¸æ¨èçš„  **********************/
const original = { a: 1, b: 2 };
// è¿™é‡Œå°†å…¶æ‹·è´åˆ°ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ä¸Š
const copy = Object.assign({}, original, { c: 3 }); 
//è¿™é‡Œåˆ é™¤äº† copy çš„ a å±æ€§ å°±ä¸ä¼šå½±å“åˆ°  original äº†; ä½†ä»ä¸æ˜¯ä¸€ä¸ªå¥½çš„å†™æ³•
delete copy.a;   


/**************   æ¨èçš„  **********************/
const original = { a: 1, b: 2 };
const copy = { ...original, c: 3 }; 
const { a, ...noA } = copy; 
```

### 8ã€ä½¿ç”¨ getter å’Œ setter

###### ä½¿ç”¨ getter å’Œ setter è®¿é—®å¯¹è±¡ä¸Šçš„æ•°æ®å¯èƒ½æ¯”ç®€å•åœ°æŸ¥æ‰¾å¯¹è±¡ä¸Šçš„å±æ€§æ›´å¥½ã€‚æˆ–è®¸ä½ å¯èƒ½ä¼šé—®: " Why? "

* å½“ä½ æƒ³åœ¨è·å–å¯¹è±¡å±æ€§ä¹‹å¤–åšæ›´å¤šçš„äº‹æƒ…æ˜¯,ä½ ä¸å¿…æŸ¥æ‰¾æˆ–è€…æ›´æ”¹ä»£ç ä¸­çš„æ¯ä¸ªè®¿é—®å™¨å†æ‰§è¡Œ`set`
* è·å–ä»¥åŠè®¾ç½®å¯¹è±¡æ—¶æ›´å®¹æ˜“æ·»åŠ æ—¥å¿—è®°å½•å’Œé”™è¯¯å¤„ç† (åœ¨getã€setæ–¹æ³•ä¸­æ·»åŠ ç›¸åº”å¤„ç†å³å¯)
* ä½ å¯ä»¥å»¶è¿ŸåŠ è½½å¯¹è±¡çš„å±æ€§,æ¯”å¦‚ä»æœåŠ¡å™¨è·å–å®ƒ

###### ä¸æ¨èçš„

```js
/****************  ä¸å¥½çš„å†™æ³•  ********************* */
function makeBankAccount() {

  return {
    name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª',
    _age: 18
  };
}

const account = makeBankAccount();
//ä½ å¯ä»¥éšæ„çš„å¯¹äºå…¶è¿›è¡Œä¿®æ”¹
account.name = 'æ–°ç”Ÿä»£å†œæ°‘å·¥';

//ä½ å¯ä»¥éšæ„çœ‹åˆ°é‡Œé¢æ‰€æœ‰å†…å®¹
console.log(account) 
//log :  {name: 'æ–°ç”Ÿä»£å†œæ°‘å·¥', _age: 18}
```

###### æ¨èçš„å†™æ³•

```js
/****************  æ¨èçš„å†™æ³•  ********************* */
function makeStudent() {
  //1. å®šä¹‰å±æ€§
  let name = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
  //è¿™é‡ŒåŠ ä¸‹åˆ’çº¿çš„æ„æ€æ˜¯,è¿™æ˜¯ç§æœ‰å˜é‡,æˆ‘ä¸æƒ³æœ‰äººèƒ½åœ¨æ–¹æ³•å¤–çš„åœ°æ–¹ç›´æ¥è®¿é—®çš„åˆ°å®ƒ,ä¸»è¦æ˜¯ä¸€ä¸ªçº¦å®š,æé†’å¼€å‘è€…,æ²¡æœ‰å®é™…çº¦æŸèƒ½åŠ›  
  let _age = 18 

  //2. ä¸€ä¸ª'getter'æ–¹æ³•çš„è¿”å›å€¼å…¬å¼€æƒ³åˆ†äº«çš„å±æ€§
  function getName() {
    return name;
  }
  //ä¹Ÿå¯ä»¥å°†ä¸æƒ³å…¬å¼€çš„æ­£ç¡®æ•°æ®åŠ å·¥åå†åˆ†äº«
  function getAge() {
    return _age - 5; //æˆ‘æƒ³æˆ‘åº”è¯¥æ›´å¹´è½»ç‚¹
  }


  //3. é€šnameè¿‡'setter'è¿›è¡Œå†™å…¥
  function setName(newName) {
    // ... åœ¨æ›´æ–°åå­—å‰å¯ä»¥è¿›è¡Œä¹‹å‰éªŒè¯
    name = newName;
  }
//4. å°†æ–¹æ³•æš´éœ²å‡ºå»
  return {
    getName,
    getAge,
    setName
  };
}

/*****************  è°ƒç”¨  *********************** */
const student = makeStudent();

//æˆ‘åªèƒ½çœ‹åˆ°è¿™ä¸ªå¯¹è±¡æƒ³æš´éœ²çš„, åªæš´éœ²äº†ä¸‰ä¸ªapiæ¥å£,çœ‹ä¸åˆ°é‡Œé¢å…·ä½“å±æ€§
console.log(student) //  {getName: Æ’, getAge: Æ’, setName: Æ’}

//é€šè¿‡ 'getter' å¾—åˆ°æš´éœ²å‡ºæ¥çš„æ•°æ®
const { getName, getAge } = student;
console.log(`å¤§å®¶å¥½,æˆ‘æ˜¯${getName()},æˆ‘ä»Šå¹´${getAge()}å²äº†`) // å¤§å®¶å¥½,æˆ‘æ˜¯åŠªåŠ›å­¦ä¹ çš„æ±ª,æˆ‘ä»Šå¹´13å²äº†

//é€šè¿‡ 'setting' æ¥å†™å…¥æ•°æ®
const { setName } = student;
setName('æ–°ç”Ÿä»£å†œæ°‘å·¥');
console.log(`å¤§å®¶å¥½,æˆ‘æ˜¯${getName()},æˆ‘ä»Šå¹´${getAge()}å²äº†`) //å¤§å®¶å¥½,æˆ‘æ˜¯æ–°ç”Ÿä»£å†œæ°‘å·¥,æˆ‘ä»Šå¹´13å²äº†
```

è¿™é‡Œçš„å†™æ³•å°±å¾ˆåƒJavaçš„BeanåŒ…éƒ¨åˆ†å†™æ³•äº†,å­¦è¿‡Javaçš„å°ä¼™ä¼´ä»¬è‚¯å®šå°±å¾ˆç†Ÿæ‚‰äº†

### 9ã€ä½¿å¯¹è±¡å…·æœ‰ç§æœ‰æˆå‘˜

è¿™å¯ä»¥é€šè¿‡é—­åŒ…æ¥å®ç°ï¼ˆå¯¹äº ES5 åŠä»¥ä¸‹ï¼‰

```js
/**************  ä¸æ¨èçš„å†™æ³•  *************************/
const Student = function(name) {
  this.name = name;
};

Student.prototype.getName = function getName() {
  return this.name;
};

const hong = new Student("åŠªåŠ›å­¦ä¹ çš„æ±ª");
console.log(`è¯¥å­¦ç”Ÿçš„åå­—æ˜¯: ${hong.getName()}`);  //è¯¥å­¦ç”Ÿçš„åå­—æ˜¯: åŠªåŠ›å­¦ä¹ çš„æ±ª
delete hong.name; //å¯ä»¥ç›´æ¥åˆ é™¤å®ä¾‹ä¸Šçš„å±æ€§
console.log(`è¯¥å­¦ç”Ÿçš„åå­—æ˜¯: ${hong.getName()}`);  //è¯¥å­¦ç”Ÿçš„åå­—æ˜¯: undefined

/**************  æ¨èçš„å†™æ³•  *************************/
function makeStudent(name) {
  //è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡,å¯¹è±¡ä¸­çš„å±æ€§æ˜¯ [ getName() ]
  return {
    // getName() æ–¹æ³•è¿”å›çš„æ˜¯ä¼ å…¥æ—¶çš„ name
    getName() {
      return name;
    }
  };
}

const hong = makeStudent("åŠªåŠ›å­¦ä¹ çš„æ±ª");
console.log(`è¯¥å­¦ç”Ÿçš„åå­—æ˜¯: ${hong.getName()}`);  //è¯¥å­¦ç”Ÿçš„åå­—æ˜¯: åŠªåŠ›å­¦ä¹ çš„æ±ª
//å®é™…ä¸Šè¿™ä¸ªæ —å­ä¸­çš„ name æ˜¯é€šè¿‡é—­åŒ…è¿›è¡Œäº†ä¿å­˜,å¹¶ä¸å½±å“å–å€¼
delete hong.name; 
console.log(`è¯¥å­¦ç”Ÿçš„åå­—æ˜¯: ${hong.getName()}`);  //è¯¥å­¦ç”Ÿçš„åå­—æ˜¯: åŠªåŠ›å­¦ä¹ çš„æ±ª
```

### 10ã€å±æ€§

#### â…  - è®¿é—®å±æ€§æ—¶ä½¿ç”¨ç‚¹ç¬¦å·

è¿™ä¸ªä¸ç”¨è§£é‡Šå§,è®¿é—®çš„å±æ€§åå›ºå®šæ—¶,ä¹Ÿæ¯”è¾ƒå°‘æœ‰äººæ•…æ„å†™æˆ `[]` è¿™æ ·çš„å½¢å¼

```js
const hong = {
  name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª',
  age: 28,
};

// ä¸æ¨èçš„
const userName = hong['name'];

// æ¨èçš„
const userName = hong.name;
```

#### â…¡ - ä½¿ç”¨å˜é‡è®¿é—®å±æ€§æ—¶ï¼Œä½¿ç”¨ `[]`è¡¨ç¤ºæ³•

ä¸ä¸Šé¢ä¸åŒçš„æ˜¯,è¿™é‡Œè®¿é—®çš„å±æ€§åæ˜¯ä¸€ä¸ªå˜é‡

```js
const hong = {
  name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª',
  age: 28,
};

function getProp(keyName) {
  return hong[keyName];
}
const userName = getProp('name')
```

#### â…¢ - è®¡ç®—æŒ‡æ•°æ—¶ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ `**` è¿ç®—ç¬¦

è¿™ä¸ªä¸»è¦çœ‹å…¬å¸å›¢é˜Ÿè§„èŒƒäº†,è¿™ä¸ªç”¨æ³•æ²¡å°è¯•è¿‡,æ‰€ä»¥æˆ‘é‡åˆ°äº†å°±åˆ—ä¸¾å‡ºæ¥äº†

```js
// ä¸€èˆ¬çš„
const binary = Math.pow(2, 10);

// å¯ä»¥å°è¯•çš„
const binary = 2 ** 10;
```

------



## äº”ã€æ•°ç»„

### 1ã€ä½¿ç”¨å­—é¢è¯­æ³•åˆ›å»ºæ•°ç»„

###### ä¸ºä»€ä¹ˆ?

* é¦–å…ˆä¹¦å†™ä¸Šæ›´ç®€æ´,ç¨‹åºå‘˜èƒ½å·æ‡’å°±è¦å­¦ä¼šå·æ‡’,è¿™ä¹Ÿæ˜¯ç›®å‰ä»å»ºè®®ä¼˜å…ˆè¿™æ ·ä¹¦å†™çš„ä¸»è¦åŸå› 
* å…¶æ¬¡,åœ¨ä»¥å‰ **V8å¼•æ“** æœªå‡ºç°æ—¶,æ˜¯æœ‰æ€§èƒ½åŒºåˆ«çš„. ç›´æ¥å­—é¢è¯­æ³•å£°æ˜æ€§èƒ½ä¸Šä¼šæ›´å¥½,ä¸è¿‡ç°åœ¨åº”è¯¥å·®åˆ«ä¸å¤§äº†
* **ES6** å Array æ‹“å±•äº†ä¸€äº›æ–°ç”¨æ³•,å®é™…ä¸Šå¦‚æœæƒ³è¦æå‰çº¦å®šæ•°ç»„é•¿åº¦ç­‰,è¿˜æ˜¯å¯ä»¥ç”¨ `new Array()` çš„

```js
// bad
const items = new Array();

// æ¨èçš„
const items = [];
```

### 2ã€ä½¿ç”¨ [Array.push()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/push) å–ä»£ç›´æ¥èµ‹å€¼æ¥ç»™æ•°ç»„æ·»åŠ é¡¹

```js
const nameStack = [];
//ä¸å¥½çš„å†™æ³•  --é€šå¸¸åº”è¯¥ä¹Ÿæ²¡äººè¿™æ ·å†™å§
nameStack[nameStack.length]='åŠªåŠ›å­¦ä¹ çš„æ±ª';

//æ¨èçš„å†™æ³•
nameStack.push('åŠªåŠ›å­¦ä¹ çš„æ±ª')
```

### 3ã€å»ºè®®ä½¿ç”¨æ•°ç»„å±•å¼€æ–¹æ³• `...` æ¥æ‹·è´æ•°ç»„

 ###### è‚‰çœ¼å¯è§çš„ç®€æ´åº¦å·®è·

```js
// ä¸å¥½çš„
const len = items.length;
const itemsCopy = [];
let i;
for (i = 0; i < len; i += 1) {
  itemsCopy[i] = items[i];
}

// æ¨èçš„
const itemsCopy = [...items];
```

### 4ã€å°†ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡è½¬æ¢æˆä¸€ä¸ªæ•°ç»„ï¼Œ å»ºè®®ä½¿ç”¨å±•å¼€æ–¹æ³• `...` ä»£æ›¿ [`Array.from`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from)

 ###### ä»æ˜¯æ¯”è¾ƒç®€æ´,ä¸»è¦è¿˜æ˜¯çœ‹å›¢é˜Ÿçº¦å®š,ä½†æˆ‘æ›´å€¾å‘äºç›´æ¥ç”¨å±•å¼€æ–¹æ³•è¿›è¡Œä»£æ›¿

```js
const divs = document.querySelectorAll('div');

// ä¸€èˆ¬çš„
const nodes = Array.from(divs);

// æ›´å¥½çš„
const nodes = [...divs];
```

### 5ã€å¯¹äºå¯¹è¿­ä»£å™¨çš„æ˜ å°„ï¼Œä½¿ç”¨ [Array.from](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from) æ›¿ä»£å±•å¼€æ–¹æ³• `...` 

å¯¹äºå¯¹è¿­ä»£å™¨çš„æ˜ å°„ï¼Œä½¿ç”¨ [Array.from](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from) æ›¿ä»£å±•å¼€æ–¹æ³• `...` ï¼Œ å› ä¸ºå®ƒé¿å…äº†åˆ›å»ºä¸­é—´æ•°ç»„ã€‚

```js
// ä¸å¥½çš„  -- å±•å¼€æ–¹å¼å®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ•°ç»„,æ€§èƒ½å¤šå°‘æœ‰æ¶ˆè€—
const baz = [...arr].map(bar);

// good  -- Array.from ç¬¬äºŒä¸ªå‚æ•°å®é™…ä¸Šå°±æ˜¯ map å›è°ƒ
const baz = Array.from(arr, bar);
```

### 6ã€æ•°ç»„å›è°ƒæ–¹æ³•ä¸­çš„ return æ³¨æ„é¡¹

**åœ¨æ•°ç»„å›è°ƒæ–¹æ³•ä¸­ä½¿ç”¨ return è¯­å¥ã€‚ å¦‚æœå‡½æ•°ä½“ç”±ä¸€ä¸ªè¿”å›æ— å‰¯ä½œç”¨çš„è¡¨è¾¾å¼çš„å•ä¸ªè¯­å¥ç»„æˆï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥è¿”å›å€¼**

æ­¤å¤„ç”¨è¿‡å¤šçš„æè¿°ä¸å¦‚ç›´æ¥ä¸Šå‡ ä¸ªä¾‹å­

#### â… -  ä¸¾ä¸ªç®€å•çš„ğŸŒ°

```js
// è¿™ä¸¤ä¸ªéƒ½æ˜¯æ¨èçš„å†™æ³•
[1, 2, 3].map((x) = {
  const y = x + 1;
  return x * y;
});

// good
[1, 2, 3].map(x = x + 1);
```

#### â…¡ - ä¸¾ä¸ªå…³äºmapçš„ğŸŒ°

```js
// bad - æ²¡æœ‰è¿”å›å€¼ï¼Œæ„å‘³ç€åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£å `flatten` è¢«é”€æ¯,ç›¸å½“äºæ— æ„ä¹‰
const arr = [[0, 1], [2, 3], [4, 5]].map((acc, item, index) = {//æŠ¥é”™
 			 const flatten = acc.concat(item);
			});

// æ­£ç¡®çš„åšæ³•
const arr1 =[[0, 1], [2, 3], [4, 5]].map((acc, item, index) = {
      		  const flatten = acc.concat(item);
 			 return flatten;
			});
```

#### â…¢ -  å†ä¸¾ä¸ªğŸŒ°

```js
// bad
inbox.filter((msg) = {
  const { subject, author } = msg;
  if (subject === 'æ´ªå­¦ä¹ ç¬”è®°') {
    return author === 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
  } else { //å®é™…ä¸Šè¿™ä¸ªelseæ˜¯ä¸å¿…è¦çš„
    return false;
  }
});

// æ¨èçš„
inbox.filter((msg) = {
  const { subject, author } = msg;
  if (subject === 'æ´ªå­¦ä¹ ç¬”è®°') {
    return author === 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
  }
  //è¿™æ ·å®é™…ä¸Šä¸ä¸Šæ–¹ä»£ç æ˜¯åŒæ ·æ•ˆæœçš„,ä½†æ˜¯æ˜æ˜¾ä»£ç ç»“æ„è·Ÿæ¸…æ™°äº›
  return false;
});
```

### 7ã€å¦‚æœæ•°ç»„æœ‰å¤šè¡Œï¼Œåˆ™åœ¨å¼€å§‹çš„æ—¶å€™æ¢è¡Œï¼Œç„¶ååœ¨ç»“æŸçš„æ—¶å€™æ¢è¡Œã€‚

```js
/********************* ä¸æ¨èçš„ ****************************/
const arr = [
  [0, 1], [2, 3], [4, 5],
];

const objectInArray = [{
  id: 1,
}, {
  id: 2,
}];

const numberInArray = [
  1, 2,
];

/********************* æ¨èçš„ ****************************/
const arr = [[0, 1], [2, 3], [4, 5]];

const objectInArray = [
  {
    id: 1,
  },
  {
    id: 2,
  },
];

const numberInArray = [
  1,
  2,
];
```

------



## å…­ã€è§£æ„

### 1ã€åœ¨è®¿é—®å’Œä½¿ç”¨å¯¹è±¡çš„å¤šä¸ªå±æ€§çš„æ—¶å€™ä½¿ç”¨å¯¹è±¡çš„è§£æ„

 ###### ä¸ºä»€ä¹ˆ? è§£æ„å¯ä»¥é¿å…ä¸ºè¿™äº›å±æ€§åˆ›å»ºä¸´æ—¶å¼•ç”¨ã€‚

```js
// ä¸æ¨èçš„å†™æ³•
function getFullName(user) {
  const name = user.name;
  const age = user.age;

  return `ä½ å¥½!æˆ‘å«${name},æˆ‘ä»Šå¹´${age}å²äº†`;
}

// æ¨èçš„å†™æ³•
function getFullName(user) {
  const { name, age } = user;
  return `ä½ å¥½!æˆ‘å«${name},æˆ‘ä»Šå¹´${age}å²äº†`;
}

// æ›´å¥½çš„å†™æ³•
function getFullName({ name, age }) {
  return `ä½ å¥½!æˆ‘å«${name},æˆ‘ä»Šå¹´${age}å²äº†`;
}
```

### 2ã€ä½¿ç”¨æ•°ç»„è§£æ„

ä»£ç è´¨é‡å°±æ˜¯è¿™æ ·ä¸€æ­¥ä¸€æ­¥æå‡ä¸Šå»çš„

```js
const arr = [1, 2, 3, 4];

// ä¸æ¨èçš„å†™æ³•
const first = arr[0];
const second = arr[1];

// æ¨èçš„å†™æ³•
const [first, second] = arr;
```

### 3ã€å¯¹äºå¤šä¸ªè¿”å›å€¼ä½¿ç”¨å¯¹è±¡è§£æ„ï¼Œè€Œä¸æ˜¯æ•°ç»„è§£æ„

 ###### **ä¸ºä»€ä¹ˆ? ä½ å¯ä»¥éšæ—¶æ·»åŠ æ–°çš„å±æ€§æˆ–è€…æ”¹å˜å±æ€§çš„é¡ºåºï¼Œè€Œä¸ç”¨ä¿®æ”¹è°ƒç”¨æ–¹**

```js
/***********  ä¸å¥½çš„å†™æ³•  ****************** */
function processInput(input) {
  // å¤„ç†ä»£ç ...
  return [left, right, top, bottom];
}

// è°ƒç”¨è€…éœ€è¦è€ƒè™‘è¿”å›æ•°æ®çš„é¡ºåº,æ•°ç»„è§£æ„æ˜¯æŒ‰ç…§é¡ºåºèµ‹äºˆçš„,ä¸èƒ½è·³è¿‡
const [left, __, top] = processInput(input);


/***********  æ¨èçš„å†™æ³•  ****************** */
function processInput(input) {
  // å¤„ç†ä»£ç ...
  return { left, right, top, bottom };
}

// è°ƒç”¨è€…åªé€‰æ‹©ä»–ä»¬éœ€è¦çš„æ•°æ®,å¯¹è±¡è§£æ„ä¼šæŒ‰ç…§ key æŒ‰éœ€å¼•å…¥
const { left, top } = processInput(input);
```

------



## ä¸ƒã€å­—ç¬¦

### 1ã€ä½¿ç”¨å•å¼•å· `''` å®šä¹‰å­—ç¬¦ä¸²

```js
// ä¸æ¨èçš„
const name = "åŠªåŠ›å­¦ä¹ çš„æ±ª";

// ä¸æ¨èçš„ - æ¨¡æ¿æ–‡å­—åº”è¯¥åŒ…å«æ’å€¼æˆ–æ¢è¡Œ,å¦åˆ™ç›´æ¥ '' å³å¯.å®é™…ä¸Šæ¨¡æ¿è¯­æ³•æ˜¯éœ€è¦æ¶ˆè€—æ›´å¤šæ€§èƒ½çš„
const name = `åŠªåŠ›å­¦ä¹ çš„æ±ª`;

// æ¨èçš„å†™æ³•
const name = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
```

### 2ã€ä½¿è¡Œè¶…è¿‡100ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ä¸åº”ä½¿ç”¨å­—ç¬¦ä¸²è¿æ¥è·¨å¤šè¡Œå†™å…¥ã€‚

```js
/*****   ä¸æ¨èçš„:è™½ç„¶çœ‹èµ·æ¥æ›´èˆ’æœ,ä½†å¦‚æœä½ æœç´¢æ–‡æœ¬å†…å®¹æ—¶å´ä¸å¥½æœç´¢äº†   **** */
//æ¢è¡Œè™½ç„¶ä½¿å¾—æˆ‘ä»¬åœ¨ä»£ç ä¸­è§‚çœ‹æ–‡æœ¬å†…å®¹å˜å¾—æ¸…æ™°,ä½†æ˜¯æ— ç–‘å¯¹äºä»£ç æœç´¢è€Œè¨€å˜å¾—å›°éš¾
const badText = 'å¯äººä¸æ˜¯æ–­æ°”çš„æ—¶å€™æ‰çœŸçš„æ­»äº†ã€‚æœ‰äººè¯´äººä¼šæ­»ä¸‰æ¬¡ï¼Œ\
ç¬¬ä¸€æ¬¡æ˜¯ä»–æ–­æ°”çš„æ—¶å€™ ï¼Œä»ç”Ÿç‰©å­¦ä¸Šä»–æ­»äº†ï¼›\
ç¬¬äºŒæ¬¡æ˜¯ä»–ä¸‹è‘¬çš„æ—¶å€™ï¼Œäººä»¬æ¥å‚åŠ ä»–çš„è‘¬ç¤¼ï¼Œæ€€å¿µä»–çš„ä¸€ç”Ÿï¼Œç„¶ååœ¨ç¤¾ä¼šä¸Šä»–æ­»äº†ï¼Œä¸å†ä¼šæœ‰ä»–çš„ä½ç½®ï¼›\
ç¬¬ä¸‰æ¬¡æ˜¯æœ€åä¸€ä¸ªè®°å¾—ä»–çš„äººæŠŠä»–å¿˜è®°çš„æ—¶å€™ï¼Œé‚£æ—¶å€™ä»–æ‰çœŸæ­£çš„æ­»äº†'
//ä¹Ÿä¸å»ºè®®ç”¨ + è¿›è¡Œè¿æ¥
const text = 'å¯äººä¸æ˜¯æ–­æ°”çš„æ—¶å€™æ‰çœŸçš„æ­»äº†ã€‚' + 'æœ‰äººè¯´äººä¼šæ­»ä¸‰æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ˜¯ä»–æ–­æ°”çš„æ—¶å€™ ï¼Œä»ç”Ÿç‰©å­¦ä¸Šä»–æ­»äº†ï¼›' +
  'ç¬¬äºŒæ¬¡æ˜¯ä»–ä¸‹è‘¬çš„æ—¶å€™ï¼Œäººä»¬æ¥å‚åŠ ä»–çš„è‘¬ç¤¼ï¼Œæ€€å¿µä»–çš„ä¸€ç”Ÿï¼Œç„¶ååœ¨ç¤¾ä¼šä¸Šä»–æ­»äº†ï¼Œä¸å†ä¼šæœ‰ä»–çš„ä½ç½®ï¼›' +
  'ç¬¬ä¸‰æ¬¡æ˜¯æœ€åä¸€ä¸ªè®°å¾—ä»–çš„äººæŠŠä»–å¿˜è®°çš„æ—¶å€™ï¼Œé‚£æ—¶å€™ä»–æ‰çœŸæ­£çš„æ­»äº†'


/************ æ¨èçš„å†™æ³•  **************** */
const goodText = 'å¯äººä¸æ˜¯æ–­æ°”çš„æ—¶å€™æ‰çœŸçš„æ­»äº†ã€‚æœ‰äººè¯´äººä¼šæ­»ä¸‰æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ˜¯ä»–æ–­æ°”çš„æ—¶å€™ ï¼Œä»ç”Ÿç‰©å­¦ä¸Šä»–æ­»äº†ï¼›ç¬¬äºŒæ¬¡æ˜¯ä»–ä¸‹è‘¬çš„æ—¶å€™ï¼Œäººä»¬æ¥å‚åŠ ä»–çš„è‘¬ç¤¼ï¼Œæ€€å¿µä»–çš„ä¸€ç”Ÿï¼Œç„¶ååœ¨ç¤¾ä¼šä¸Šä»–æ­»äº†ï¼Œä¸å†ä¼šæœ‰ä»–çš„ä½ç½®ï¼›ç¬¬ä¸‰æ¬¡æ˜¯æœ€åä¸€ä¸ªè®°å¾—ä»–çš„äººæŠŠä»–å¿˜è®°çš„æ—¶å€™ï¼Œé‚£æ—¶å€™ä»–æ‰çœŸæ­£çš„æ­»äº†'
```

### 3ã€å½“ä»¥ç¼–ç¨‹æ¨¡å¼æ„å»ºå­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿ä»£æ›¿å­—ç¬¦ä¸²æ‹¼æ¥

###### ä¸ºä»€ä¹ˆ? å­—ç¬¦ä¸²æ¨¡æ¿ä¸ºä½ æä¾›äº†ä¸€ç§å¯è¯»çš„ã€ç®€æ´çš„è¯­æ³•ï¼Œå…·æœ‰æ­£ç¡®çš„æ¢è¡Œå’Œå­—ç¬¦ä¸²æ’å€¼ç‰¹æ€§

```js
// ä¸æ¨èçš„
function sayHi(name) {
  return 'How are you, ' + name + '?';
}

// æ›´ç³Ÿç³•çš„  --è¿™æ ·å†™æˆ‘è¿˜å®æ„¿ç”¨ç¬¬ä¸€ä¸ªæ–¹å¼æ›´ç®€å•
function sayHi(name) {
  return ['How are you, ', name, '?'].join();
}

// å¥½ä¸­å¸¦åçš„
function sayHi(name) {
  return `How are you, ${ name }?`; //è¿™é‡Œ ${} ä¸­ä¸å˜é‡ä¸ç”¨åŠ ç©ºæ ¼é—´è·
}

// æ¨èçš„
function sayHi(name) {
  return `How are you, ${name}?`;
}
```

### 4ã€ä¸è¦åœ¨å­—ç¬¦ä¸²ä¸Šä½¿ç”¨ `eval()` 

 å­—é¢æ„æ€: ä¸è¦åœ¨å­—ç¬¦ä¸²ä¸Šä½¿ç”¨ `eval()` ,å®ƒæ‰“å¼€äº†å¤ªå¤šæ¼æ´,è‡³äºä¸ºä½•? ç›´æ¥ç™¾åº¦å»

### 5ã€ä¸è¦è½¬ä¹‰å­—ç¬¦ä¸²ä¸­ä¸å¿…è¦çš„å­—ç¬¦

###### ä¸ºä»€ä¹ˆ?  åæ–œæ æŸå®³äº†å¯è¯»æ€§ï¼Œå› æ­¤åªæœ‰åœ¨å¿…è¦çš„æ—¶å€™æ‰ä¼šå‡ºç°

```js
// ä¸å¥½çš„
const foo = '\'this\' \i\s \"åŠªåŠ›å­¦ä¹ çš„æ±ª\"';

// æ¨èçš„
const foo = '\'this\' is "åŠªåŠ›å­¦ä¹ çš„æ±ª"';
const foo = `'this' is "åŠªåŠ›å­¦ä¹ çš„æ±ª"`;
```

------



## å…«ã€ç±»ä¸æ„é€ å™¨

 è¿™ä¸€ç« èŠ‚åº”ç”¨åˆ°ES6ä¸­çš„Classç›¸å…³çŸ¥è¯†ç‚¹  -- **[ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°](https://gitee.com/hongjilin/hongs-study-notes/tree/master/ç¼–ç¨‹_å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°/ES6åŠåç»­ç‰ˆæœ¬å­¦ä¹ ç¬”è®°)** 

### 1ã€å°½é‡ä½¿ç”¨ `class`. é¿å…ç›´æ¥æ“ä½œ `prototype`

 ###### ä¸ºä»€ä¹ˆ? `class` è¯­æ³•æ›´ç®€æ´ï¼Œæ›´å®¹æ˜“æ¨ç†ã€‚

```js
/*************** ä¸æ¨èçš„å†™æ³• *************** */
function Queue(contents = []) {
  this.queue = [...contents];
}
//åœ¨ Queue çš„åŸå‹ä¸Šå®šä¹‰ä¸€ä¸ª pop æ–¹æ³•
Queue.prototype.pop = function () { 
  const value = this.queue[0];
  this.queue.splice(0, 1);
  return value;
};


/*************** æ¨èçš„å†™æ³• *************** */
class Queue {
  constructor(contents = []) {
    this.queue = [...contents];
  }
  //å®é™…ä¸Šè¿™æ ·å†™ä¼šæ›´å®¹æ˜“ç†è§£,ç›´æ¥åœ¨ Queue ä¸Šå®šä¹‰ä¸€ä¸ª pop å±æ€§æ–¹æ³•
  pop() {
    const value = this.queue[0];
    this.queue.splice(0, 1);
    return value;
  }
}
```

### 2ã€ä½¿ç”¨ `extends` æ¥æ‰©å±•ç»§æ‰¿

###### ä¸ºä»€ä¹ˆ? å®ƒæ˜¯ä¸€ä¸ªå†…ç½®çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸ç ´å `instanceof` çš„æƒ…å†µä¸‹ç»§æ‰¿åŸå‹åŠŸèƒ½ã€‚

```js
/*************** ä¸æ¨èçš„å†™æ³•:å¾ˆæ˜æ˜¾,è¿™å‡ è¡Œä»£ç éœ€è¦æ›´å¤šçš„é˜…è¯»æˆæœ¬ *************** */
const inherits = require('inherits');
//è¿™é‡Œæ˜¯å°† å®ä¾‹ çš„ this å¯¹è±¡æŒ‡å‘ Queue
function PeekableQueue(contents) {
  Queue.apply(this, contents);
}
inherits(PeekableQueue, Queue);
//è¿™é‡Œæ˜¯åœ¨ PeekableQueue çš„åŸå‹ä¸ŠåŠ å±æ€§æ–¹æ³•
PeekableQueue.prototype.peek = function () {
  return this.queue[0];
};


/*************** æ¨èçš„å†™æ³•:ç›´æ¥ç»§æ‰¿çˆ¶ç±» *************** */
class PeekableQueue extends Queue {
  peek() {
    return this.queue[0];
  }
}
```

### 3ã€åªè¦åœ¨ç¡®ä¿èƒ½æ­£å¸¸å·¥ä½œå¹¶ä¸”ä¸äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨çš„æƒ…å†µä¸‹ï¼Œç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„ `toString()` æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥çš„

```js
class Person {
  constructor(options = {}) {
    this.name = options.name || 'è¿™äººæ²¡æœ‰åå­—';
  }

  getName() {
    return this.name;
  }

  toString() {
    return `My name is- ${this.getName()}`;
  }
}
const anonym = new Person();
console.log(anonym.toString())  //My name is- è¿™äººæ²¡æœ‰åå­—

const hong = new Person({ name: 'åŠªåŠ›å­¦ä¹ åœ°æ±ª' });
console.log(hong.toString())    //My name is- åŠªåŠ›å­¦ä¹ åœ°æ±ª
```

### 4ã€å¦‚æœæ²¡æœ‰æŒ‡å®šç±»ï¼Œåˆ™ç±»å…·æœ‰é»˜è®¤çš„æ„é€ å™¨ã€‚ ä¸€ä¸ªç©ºçš„æ„é€ å™¨æˆ–æ˜¯ä¸€ä¸ªä»£è¡¨çˆ¶ç±»çš„å‡½æ•°æ˜¯æ²¡æœ‰å¿…è¦çš„

```js
/**********************  æ„é€ å‡½æ•°ç¤ºä¾‹  **************************** */
//ä¸æ¨èçš„
class Person {
  constructor() {} //ä¸€ä¸ªç©ºçš„æ„é€ å™¨æ˜¯æ²¡å¿…è¦çš„
  getName() {
    return this.name;
  }
}
//æ¨èçš„
class Person {
  getName() {
    return this.name;
  }
}

/**********************  extends ç¤ºä¾‹  **************************** */
// ä¸æ¨èçš„ --åªæ˜¯ä¸€ä¸ªä»£è¡¨çˆ¶ç±»çš„å‡½æ•°æ˜¯æ²¡æœ‰å¿…è¦çš„
class Hong extends Person {
  constructor(...args) {
    super(...args);
  }
}

// æ¨èçš„å†™æ³•  
class Hong extends Person {
  constructor(...args) {
    super(...args);
    this.name = 'åŠªåŠ›å­¦ä¹ çš„æ±ª'; 
  }
}

/******************* è°ƒç”¨ ****************** */
let hong = new Hong()

hong.getName() //'åŠªåŠ›å­¦ä¹ çš„æ±ª'
console.log(hong) //hongÂ {name: 'åŠªåŠ›å­¦ä¹ çš„æ±ª'}
```

### 5ã€é¿å…å®šä¹‰é‡å¤çš„ç±»æˆå‘˜

 ###### ä¸ºä»€ä¹ˆ? é‡å¤çš„ç±»æˆå‘˜å£°æ˜å°†ä¼šé»˜è®¤å€¾å‘äºæœ€åä¸€ä¸ª - å…·æœ‰é‡å¤çš„ç±»æˆå‘˜å¯ä»¥è¯´æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚

```js
// ä¸æ¨èæˆ–è€…è¯´ç®—æ˜¯é”™è¯¯çš„
class Foo {
  bar() { return 1; }
  bar() { return 2; }
}
```

### 6ã€å»ºè®®ä½¿ç”¨ æ–¹æ³•é“¾ æ¨¡å¼å®šä¹‰ç±»

###### **ä¸ºä»€ä¹ˆ?**

* è¿™ç§æ¨¡å¼åœ¨ JavaScript ä¸­éå¸¸æœ‰ç”¨ï¼Œä½ å¯ä»¥åœ¨è®¸å¤šåº“ä¸­çœ‹åˆ°å®ƒï¼Œä¾‹å¦‚ jQuery å’Œ Lodashã€‚
* å®ƒä½¿ä½ çš„ä»£ç å…·æœ‰è¡¨ç°åŠ›ï¼Œå¹¶ä¸”ä¸é‚£ä¹ˆå†—é•¿ã€‚
* å‡ºäºè¿™ä¸ªåŸå› ,æˆ‘è§‰å¾—ä½ å¯ä»¥ä½¿ç”¨ **æ–¹æ³•é“¾** å¹¶çœ‹çœ‹ä½ çš„ä»£ç å°†æœ‰å¤šå¹²å‡€ã€‚
* åœ¨ä½ çš„ç±»å‡½æ•°ä¸­ï¼Œåªéœ€`this`åœ¨æ¯ä¸ªå‡½æ•°çš„æœ«å°¾è¿”å›ï¼Œä½ å°±å¯ä»¥å°†æ›´å¤šçš„ç±»æ–¹æ³•é“¾æ¥åˆ°å®ƒä¸Šé¢ã€‚

```js
/******************  ä¸€èˆ¬çš„  ************************ */
Student.prototype.getName = function () {
  this.name = 'åŠªåŠ›å­¦ä¹ çš„æ±ª';
};

Student.prototype.setHeight = function (height) {
  this.height = height;
  return true;
};

const hong = new Student();
hong.getName(); 
hong.setHeight('180cm'); 


/******************* æ¨èçš„ *************************** */
class Work {
  getName() {
    this.name = 'æ–°ç”Ÿä»£å†œæ°‘å·¥';
    return this;
  }

  setHeight(height) {
    this.height = height;
    return this;
  }
}

const wang = new Work();
//è¿™æ ·å°±èƒ½é“¾å¼è°ƒç”¨,å¯ä»¥ä¸å†åå¤åœ°ä½¿ç”¨å®ä¾‹å»è°ƒç”¨
wang.getName()
  .setHeight('175cm');

```

### 7ã€æ¯”èµ·ES5çš„æ™®é€šå‡½æ•°åº”æ›´å€¾å‘äºä½¿ç”¨ES6çš„ç±»

###### ä¸ºä»€ä¹ˆ?

æˆ‘ä»¬å¾ˆéš¾ä¸ºç»å…¸çš„ **ES5** ç±»è·å¾—å¯è¯»çš„ç±»ç»§æ‰¿ã€æ„é€ å’Œæ–¹æ³•å®šä¹‰.å¦‚æœæˆ‘ä»¬éœ€è¦ç»§æ‰¿(å½“ç„¶,ä¸éœ€è¦æ—¶ä¹Ÿå¯),é‚£æˆ‘ä»¬åº”è¯¥æ›´å€¾å‘äºä½¿ç”¨ **ES6** ä¸­çš„ **Class** ç›¸å…³çŸ¥è¯†ç‚¹

#### â…  - ä¸æ¨èçš„ä»£ç 

```js
/********************  ä¸æ¨èçš„ ************************** */
//1. å£°æ˜çˆ¶ç±» åŠ¨ç‰©ç±»
const Animal = function (age) {
  if (!(this instanceof Animal)) {
    throw new Error("ç”¨â€œnewâ€å®ä¾‹åŒ–åŠ¨ç‰©");
  }
  this.age = age;
};

Animal.prototype.move = function move() {};

//2. å£°æ˜ä¸€çº§å­ç±» å“ºä¹³ç±», æˆ‘éœ€è¦ç»§æ‰¿ä¸Šé¢çš„äººç±»
const Mammal = function (age, furColor) {
  if (!(this instanceof Mammal)) {
    throw new Error("ç”¨â€œnewâ€å®ä¾‹åŒ–å“ºä¹³åŠ¨ç‰©");
  }

  Animal.call(this, age);
  this.furColor = furColor;
};
//å°† å“ºä¹³ç±»(Mammal) çš„åŸå‹æŒ‡å‘ åŠ¨ç‰©ç±»(Animal) çš„åŸå‹ä¸Š
Mammal.prototype = Object.create(Animal.prototype);
//å°†  å“ºä¹³ç±»(Mammal) çš„æ„é€ å‡½æ•°æŒ‡å‘æœ¬èº«
Mammal.prototype.constructor = Mammal;
//ç»™ å“ºä¹³ç±»(Mammal) åŠ ä¸Šå±äºè‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•
Mammal.prototype.liveBirth = function liveBirth() {};

//3. å£°æ˜äºŒçº§å­ç±» äººç±»  æˆ‘éœ€è¦ç»§æ‰¿ä¸Šé¢çš„å“ºä¹³ç±»
const Human = function (age, furColor, languageSpoken) {
  if (!(this instanceof Human)) {
    throw new Error("ç”¨â€œnewâ€å®ä¾‹åŒ–äººç±»");
  }

  Mammal.call(this, age, furColor);
  this.languageSpoken = languageSpoken;
};
//å°† äººç±»(Human) çš„åŸå‹æŒ‡å‘ å“ºä¹³ç±»(Mammal)  çš„åŸå‹ä¸Š
Human.prototype = Object.create(Mammal.prototype);
//å°† äººç±»(Human) çš„æ„é€ å‡½æ•°æŒ‡å‘æœ¬èº«
Human.prototype.constructor = Human;
//åŠ ä¸Š äººç±»(Human) ç‹¬æœ‰çš„æ–¹æ³• è¯´è¯
Human.prototype.speak = function speak() {};
```

 åº”è¯¥å¯ä»¥å¾ˆæ˜æ˜¾åœ°æ„Ÿè§‰åˆ°å®ç°ç»§æ‰¿æ•ˆæœçš„éº»çƒ¦ä¹‹å¤„äº†å§,ä¸‹é¢ç»™å‡ºES6å†™æ³•åšä¸ªå¯¹æ¯”

#### â…¡ - æ¨èçš„

```js
/********************  æ¨èçš„ ************************** */
//1. å£°æ˜çˆ¶ç±» åŠ¨ç‰©ç±»
class Animal {
  constructor(age) {
    this.age = age;
  }
  move() { /* å®šä¹‰åŠ¨ç‰©ç‰¹æœ‰ ç§»åŠ¨ æ–¹æ³• */}
}

//2. å£°æ˜ä¸€çº§å­ç±» å“ºä¹³ç±», æˆ‘éœ€è¦ç»§æ‰¿ä¸Šé¢çš„äººç±»
class Mammal extends Animal {
  constructor(age, furColor) {
    super(age);
    this.furColor = furColor;
  }
  liveBirth() {  /* å®šä¹‰å“ºä¹³ç±»ç‰¹æœ‰ èƒç”Ÿ æ–¹æ³• */ }
}

//3. å£°æ˜äºŒçº§å­ç±» äººç±»  æˆ‘éœ€è¦ç»§æ‰¿ä¸Šé¢çš„å“ºä¹³ç±»
class Human extends Mammal {
  constructor(age, furColor, languageSpoken) {
    super(age, furColor);
    this.languageSpoken = languageSpoken;
  }
  speak() { /*  äººç±»(Human) ç‹¬æœ‰çš„æ–¹æ³• è¯´è¯ */  }
}
```

è¿™é‡Œå¯ä»¥æ˜æ˜¾çš„çœ‹å‡ºæ¥,ä»£ç æ˜æ˜¾å˜å¾—æ›´æ¸…æ™°ç®€æ´

### 8ã€ä¼˜å…ˆç»„åˆè€Œä¸æ˜¯ç»§æ‰¿

æ­£å¦‚å››äººå¸®çš„[*è®¾è®¡æ¨¡å¼ä¸­*](https://en.wikipedia.org/wiki/Design_Patterns)æ‰€è¯´çš„é‚£æ ·ï¼Œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥æ›´å–œæ¬¢ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ã€‚ä½¿ç”¨ç»§æ‰¿æœ‰å¾ˆå¤šå¾ˆå¥½çš„ç†ç”±ï¼Œä½¿ç”¨ç»„åˆä¹Ÿæœ‰å¾ˆå¤šå¾ˆå¥½çš„ç†ç”±ã€‚è¿™ä¸ªæ ¼è¨€çš„è¦ç‚¹æ˜¯: 

 ###### **å¦‚æœä½ çš„å¤´è„‘æœ¬èƒ½åœ°å€¾å‘äºç»§æ‰¿ï¼Œè¯·å°è¯•è€ƒè™‘ç»„åˆæ˜¯å¦å¯ä»¥æ›´å¥½åœ°ä¸ºä½ çš„é—®é¢˜å»ºæ¨¡ã€‚åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥**

ä½ å¯èƒ½æƒ³é—®:â€œ`æˆ‘ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ç»§æ‰¿ï¼Ÿ`â€ è¿™å–å†³äºä½ æ‰‹å¤´çš„é—®é¢˜,ä¸‹é¢åˆ—ä¸¾å‡ ä¸ª **ç»§æ‰¿æ¯”ç»„åˆæ›´æœ‰æ„ä¹‰** çš„æ —å­

- æ‚¨çš„ç»§æ‰¿ä»£è¡¨ **æ˜¯ä¸€ä¸ªå…³ç³»** è€Œä¸æ˜¯ **å…·æœ‰å…³ç³»**
- æ‚¨å¯ä»¥é‡ç”¨åŸºç±»ä¸­çš„ä»£ç ï¼ˆäººç±»å¯ä»¥åƒæ‰€æœ‰åŠ¨ç‰©ä¸€æ ·ç§»åŠ¨ï¼‰
- æ‚¨å¸Œæœ›é€šè¿‡æ›´æ”¹åŸºç±»å¯¹æ´¾ç”Ÿç±»è¿›è¡Œå…¨å±€æ›´æ”¹ã€‚ï¼ˆæ¯”å¦‚æ”¹å˜æ‰€æœ‰åŠ¨ç‰©ç§»åŠ¨æ—¶çš„çƒ­é‡æ¶ˆè€—,é‚£ä¹ˆäººç±»æ‰€ç»§æ‰¿åˆ°çš„çƒ­é‡å°å·ä¹Ÿä¼šæ”¹å˜ï¼‰

```js
/************ ä¸æ¨èçš„å†™æ³•  *********** */
class Employee {
  constructor(name, email) {
    this.name = name;
    this.email = email;
  }

}

// ä¸å¥½æ˜¯ å› ä¸ºå‘˜å·¥ å…·æœ‰ ç¨åŠ¡æ•°æ®TaxDataè¿™ç§è¡Œä¸ºã€‚ä½†ç¨åŠ¡æ•°æ®ä¸åº”è¯¥ç»§æ‰¿çš„å‘˜å·¥ç±»
// EmployeeTaxData(å‘˜å·¥ç¨åŠ¡æ•°æ®) ä¸æ˜¯ Employee(å‘˜å·¥)ç±»å‹ çš„å­ç±» 
class EmployeeTaxData extends Employee {
  constructor(ssn, salary) {
    super();
    this.ssn = ssn;
    this.salary = salary;
  }
}

/************ æ¨èçš„å†™æ³•  *********** */
class EmployeeTaxData {
  constructor(ssn, salary) {
    this.ssn = ssn;
    this.salary = salary;
  }
}

class Employee {
  constructor(name, email) {
    this.name = name;
    this.email = email;
  }
  //åœ¨ä½ éœ€è¦ç¨åŠ¡æ•°æ®æ—¶,å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹å¼ç»„åˆ,è€Œä¸æ˜¯ç»§æ‰¿
  setTaxData(ssn, salary) {
    this.taxData = new EmployeeTaxData(ssn, salary);
  }
}
```



