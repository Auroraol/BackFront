{"remainingRequest":"D:\\备份\\大型程序设计实践\\music_recommendation-main\\前端与后端代码\\前端\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\备份\\大型程序设计实践\\music_recommendation-main\\前端与后端代码\\前端\\src\\views\\songsheet.vue?vue&type=style&index=0&id=3b6d1fc0&scoped=true&lang=css","dependencies":[{"path":"D:\\备份\\大型程序设计实践\\music_recommendation-main\\前端与后端代码\\前端\\src\\views\\songsheet.vue","mtime":1656943849309},{"path":"D:\\备份\\大型程序设计实践\\music_recommendation-main\\前端与后端代码\\前端\\node_modules\\css-loader\\dist\\cjs.js","mtime":1656401498806},{"path":"D:\\备份\\大型程序设计实践\\music_recommendation-main\\前端与后端代码\\前端\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1656401489636},{"path":"D:\\备份\\大型程序设计实践\\music_recommendation-main\\前端与后端代码\\前端\\node_modules\\postcss-loader\\src\\index.js","mtime":1656401492473},{"path":"D:\\备份\\大型程序设计实践\\music_recommendation-main\\前端与后端代码\\前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656401500797},{"path":"D:\\备份\\大型程序设计实践\\music_recommendation-main\\前端与后端代码\\前端\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656401489459}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoNCiNuZXdfc29uZ3NoZWV0ew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDEwcHg7DQogICAgcmlnaHQ6IDBweDsNCiAgICBsZWZ0OiAxMDAwcHg7DQogICAgd2lkdGg6IDEwMHB4Ow0KfQ0KLyog5a2X5L2T5Zu+5qCH6byg5qCH6KaG55uW5Y+Y6ImyICovDQojc29uZ3NoZWV0IGkuaWNvbmZvbnQuaWNvbi1ib2Zhbmc6aG92ZXIgew0KCWN1cnNvcjogcG9pbnRlcjsNCgljb2xvcjogI2Y1NmM2YzsNCn0NCg0KI3NvbmdzaGVldCB7DQoJcGFkZGluZy10b3A6IDA7DQoJcG9zaXRpb246IGFic29sdXRlOw0KCXdpZHRoOiA5NjBweCAhaW1wb3J0YW50Ow0KCXJpZ2h0OiAwOw0KCWxlZnQ6IDA7DQoJbWFyZ2luLWxlZnQ6IGF1dG87DQoJbWFyZ2luLXJpZ2h0OiBhdXRvOw0KfQ0K"},{"version":3,"sources":["D:\\备份\\大型程序设计实践\\music_recommendation-main\\前端与后端代码\\前端\\src\\views\\songsheet.vue"],"names":[],"mappings":";;AA4VA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACT,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACV,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB;AACA,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;CACvC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACf,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACf;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;CACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;CACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CAClB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACvB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;CACR,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;CACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;CACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACnB","file":"D:/备份/大型程序设计实践/music_recommendation-main/前端与后端代码/前端/src/views/songsheet.vue","sourceRoot":"","sourcesContent":["<template>  \r\n\t<div id=\"songsheet\">\r\n        <el-button\r\n            id=\"new_songsheet\"    \r\n            size=\"small\"\r\n            type=\"primary\"\r\n            round\r\n            @click=\"clearDialog\"\r\n        >\r\n            新建歌单\r\n        </el-button> \r\n\t\t<el-table\r\n\t\t\t:data=\"usersData\"\r\n\t\t\tstripe\r\n\t\t\tstyle=\"width: 100%\"\r\n\t\t\t:header-cell-style=\"{ fontWeight: 'normal', border: 'none' }\"\r\n\t\t>\r\n\t\t\t<el-table-column align=\"center\" prop=\"index\" label=\"\" width=\"80\">\r\n\t\t\t\t<template #default=\"scope\">\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle=\"font-size:16px;width:20px;display:inline-block;\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ scope.$index + 1 }}\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column\r\n\t\t\t\talign=\"center\"\r\n\t\t\t\tprop=\"sheetName\"\r\n\t\t\t\tlabel=\"歌单名\"\r\n\t\t\t\twidth=\"300\"\r\n\t\t\t>\r\n\t\t\t\t<template #default=\"scope\">\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle=\"cursor:pointer;\"\r\n\t\t\t\t\t\t@click=\"songSheetDetail(scope.$index)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ scope.row.sheetName }}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n            <el-table-column\r\n\t\t\t\twidth=\"250\"\r\n\t\t\t>\r\n\t\t\t</el-table-column>\r\n            <el-table-column align=\"center\" prop=\"address\" label=\"操作\" width=\"250\">\r\n\t\t\t\t<template #default=\"scope\">\r\n\t\t\t\t\t<el-button\r\n\t\t\t\t\t\ttype=\"success\"\r\n\t\t\t\t\t\t@click=\"handleEdit(scope.$index, scope.row)\"\r\n\t\t\t\t\t\tstyle=\"margin-right:20px\"\r\n                        icon=\"el-icon-edit\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t编辑\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t\t<el-button\r\n\t\t\t\t\t\t@click=\"\r\n\t\t\t\t\t\t\thandleDelete(\r\n\t\t\t\t\t\t\t\tscope.$index,\r\n\t\t\t\t\t\t\t\tscope.row,\r\n\t\t\t\t\t\t\t\tusersData,\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t\ttype=\"danger\"\r\n                        icon=\"el-icon-delete\"\r\n\t\t\t\t\t\tplain\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t删除\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\t\t\r\n\t\t</el-table>        \r\n    \t<!-- 新建歌单的弹出框 -->\r\n\t\t<el-dialog title=\"新建歌单\" modal=\"false\" v-model=\"dialogFormVisibleAdd\">\r\n\t\t\t<el-form :model=\"form\">\r\n\t\t\t\t<el-form-item label=\"歌单名\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t<el-input\r\n\t\t\t\t\t\tv-model=\"form.sheetName\"\r\n\t\t\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\t\t\tplaceholder=\"请输入歌单名\"\r\n\t\t\t\t\t></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<template #footer>\r\n\t\t\t\t<span class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button @click=\"dialogFormVisibleAdd = false\">\r\n\t\t\t\t\t\t取 消\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"addData\">\r\n\t\t\t\t\t\t确 定\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t</span>\r\n\t\t\t</template>\r\n\t\t</el-dialog> \r\n\t\t<!-- 编辑歌单信息 -->\r\n\t\t<el-dialog title=\"编辑歌单\" modal=\"false\" v-model=\"dialogFormVisibleEdit\">\r\n\t\t\t<el-form :model=\"form\">\r\n\t\t\t\t<el-form-item label=\"歌单名\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t<el-input\r\n\t\t\t\t\t\tv-model=\"form.sheetName\"\r\n\t\t\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\t\t\tplaceholder=\"请输入歌单名\"\r\n\t\t\t\t\t></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<template #footer>\r\n\t\t\t\t<span class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button @click=\"dialogFormVisibleEdit = false\">\r\n\t\t\t\t\t\t取 消\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"submitEdit\">\r\n\t\t\t\t\t\t确 定\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t</span>\r\n\t\t\t</template>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n\tgetSongSheets,\r\n\t_addSheet,\r\n\t_deleteSheet,\r\n\t_updateSheet, \r\n} from \"../network/request.js\"\r\nimport { useStore } from \"vuex\"\r\nexport default {\r\n\tname: \"songsheets\",\r\n\tdata()\t{\r\n\t\tconst item = {\r\n\t\t\tuid:\"\",\r\n\t\t\tsheetid:\"\",\r\n\t\t\tsheetName:\"\",\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tuid: useStore().state.user.uid,\r\n\t\t\tusersData: [],\r\n\t\t\ttableData: Array(10).fill(item),\r\n\t\t\t// 修改弹出框\r\n\t\t\tdialogFormVisibleEdit: false,\r\n\t\t\t// 添加数据弹出框\r\n\t\t\tdialogFormVisibleAdd: false,\r\n\t\t\tform: {\r\n\t\t\t\tuid:\"\",\r\n\t\t\t\tsheetid: \"\",\r\n\t\t\t\tsheetName: \"\",\r\n\t\t\t},\r\n\t\t\t// 弹出框中输入框的宽度\r\n\t\t\tformLabelWidth: \"120px\",\r\n\t\t}\r\n\t},\r\n\tbeforeCreate() {\r\n\t\tconst user = useStore().state.user\r\n\t\tconsole.log(user)\r\n\t\tvar useruid = user.uid\r\n\t\tconsole.log(useruid)\r\n\t\tgetSongSheets({ uid: useruid + \"\" }).then((response) => {\r\n\t\t\tthis.usersData = response.data.data\r\n\t\t\tconsole.log(this.usersData)\r\n\t\t})\r\n\r\n\t},\r\n\tcreated() {\r\n\t\tconst user = useStore().state.user\r\n\t\tconsole.log(user)\r\n\t\tvar useruid = user.uid\r\n\t\tconsole.log(useruid)\r\n\t\t// 判断是否为游客\r\n\t\tif(user.uid == \"0\"){\r\n\t\t\tthis.$router.push({\r\n\t\t\t\tpath: \"/login\",\r\n\t\t\t})\r\n\t\t\tthis.$message({\r\n\t\t\t\ttype: \"info\",\r\n\t\t\t\tmessage: \"请先登录或注册一个账号\",\r\n\t\t\t})\r\n\t\t}\r\n\t\t// 页面加载时读取数据\r\n\t\tif (window.sessionStorage.getItem(\"user\")) {\r\n\t\t\tconsole.log(\"页面加载\")\r\n\t\t\tconst session_user = JSON.parse(\r\n\t\t\t\twindow.sessionStorage.getItem(\"user\"),\r\n\t\t\t)\r\n\t\t\tconsole.log(session_user)\r\n\t\t\tthis.$store.commit(\"SET_USER\", session_user)\r\n\t\t}\r\n\t\t// 页面刷新时保存状态\r\n\t\twindow.addEventListener(\"beforeunload\", () => {\r\n\t\t\tconsole.log(\"页面刷新\")\r\n\t\t\tconsole.log(this.$store.state.user)\r\n\t\t\twindow.sessionStorage.setItem(\r\n\t\t\t\t\"user\",\r\n\t\t\t\tJSON.stringify(this.$store.state.user),\r\n\t\t\t)\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\t// 下一页\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tconsole.log(`当前页: ${val}`)\r\n\t\t\tthis.currentPage = val\r\n\t\t\t// 换页之后改变tableData，重新渲染\r\n\t\t\tthis.usersData = this.usersData.slice(\r\n\t\t\t\t(this.currentPage - 1) * this.pageSize,\r\n\t\t\t\tthis.currentPage * this.pageSize,\r\n\t\t\t)\r\n\t\t\tconsole.log(this.usersData)\r\n\t\t},\r\n\t\t//跳转到歌单信息页面\r\n\t\tsongSheetDetail(index) {\r\n\t\t\tconsole.log(\"选择歌单的索引：\" + index)\r\n\t\t\tconst sheet = this.usersData[parseInt(index)]\r\n\t\t\tconsole.log(sheet)\r\n\t\t\tthis.$router.push({\r\n\t\t\t\tname: \"mysong\",\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tsheetid: sheet.sheetid,\r\n\t\t\t\t\tsheetName: sheet.sheetName,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 清空弹出框中的数据\r\n\t\tclearForm() {\r\n\t\t\tthis.form.uid = \"\"\r\n\t\t\tthis.form.sheetid = \"\"\r\n\t\t\tthis.form.sheetName = \"\"\r\n\t\t},\r\n\t\t// 清空添加歌单对话框的数据\r\n\t\tclearDialog() {\r\n\t\t\tthis.dialogFormVisibleAdd = true\r\n\t\t\tthis.clearForm()\r\n\t\t},\r\n\t\t//添加新建的歌单\r\n\t\taddData() {\r\n\t\t\tthis.dialogFormVisibleAdd = false\r\n\t\t\t_addSheet({\r\n\t\t\t\tuid: this.uid,\r\n\t\t\t\tsheetName: this.form.sheetName,\r\n\t\t\t}).then((response) => {\r\n\t\t\t\tif (response.data.code == 200) {\r\n\t\t\t\t\tvar useruid = this.uid\r\n\t\t\t\t\tgetSongSheets({ uid: useruid + \"\" }).then((response) => {\r\n\t\t\t\t\t\tthis.usersData = response.data.data\r\n\t\t\t\t\t\tconsole.log(this.usersData)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$alert(\r\n\t\t\t\t\t\t\"歌单id：\" + response.data.data.sheetid,\r\n\t\t\t\t\t\t\"添加提示\",\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconfirmButtonText: \"确定\",\r\n\t\t\t\t\t\t\tcallback: () => {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\t\t\t\t\tmessage: \"添加成功\",\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 弹出提示\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: \"info\",\r\n\t\t\t\t\t\tmessage: \"添加失败!\",\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 点击编辑按钮开始编辑\r\n\t\thandleEdit(index, row) {\r\n\t\t\t// 打印行号和行的内容\r\n\t\t\tconsole.log(index, row)\r\n\t\t\tthis.dialogFormVisibleEdit = true\r\n\t\t\tthis.form.sheetid = row.sheetid\r\n\t\t\tthis.form.sheetName = row.sheetName\r\n\t\t},\r\n\t\t// 提交编辑\r\n\t\tsubmitEdit() {\r\n\t\t\tthis.dialogFormVisibleEdit = false\r\n\t\t\t_updateSheet({\r\n\t\t\t\tuid:this.uid,\r\n\t\t\t\tsheetid: this.form.sheetid,\r\n\t\t\t\tsheetName: this.form.sheetName,\r\n\t\t\t}).then((response) => {\r\n\t\t\t\tif (response.data.code == 200) {\r\n\t\t\t\t\tvar useruid = this.uid\r\n\t\t\t\t\t// 重新渲染数据\r\n\t\t\t\t\tgetSongSheets({\r\n\t\t\t\t\t\tuid: useruid + \"\"\r\n\t\t\t\t\t}).then((response) => {\r\n\t\t\t\t\t\tthis.usersData = response.data.data\r\n\t\t\t\t\t\tconsole.log(this.usersData)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\t\tmessage: \"更新成功!\",\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 弹出提示\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: \"info\",\r\n\t\t\t\t\t\tmessage: \"更新失败!\",\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 单行删除，index为当前行在数组中的下标，row为当前行的内容，rows为所有行数组\r\n\t\thandleDelete(index, row, rows) {\r\n\t\t\tthis.$confirm(\"是否删除?\", \"提示\", {\r\n\t\t\t\tconfirmButtonText: \"确定\",\r\n\t\t\t\tcancelButtonText: \"取消\",\r\n\t\t\t\ttype: \"warning\",\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n                    console.log(row.sheetid)\r\n\t\t\t\t\t// 发出删除请求\r\n\t\t\t\t\t_deleteSheet({ sheetid: row.sheetid }).then((response) => {\r\n\t\t\t\t\t\tif (response.data.code == 200) {\r\n\t\t\t\t\t\t\t// 页面上删除\r\n\t\t\t\t\t\t\trows.splice(index, 1)\r\n\t\t\t\t\t\t\t// 删除成功提示信息\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\t\t\t\tmessage: \"删除成功!\",\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 删除失败提示信息\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: \"info\",\r\n\t\t\t\t\t\t\t\tmessage: \"删除失败!\",\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: \"info\",\r\n\t\t\t\t\t\tmessage: \"取消删除\",\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n#new_songsheet{\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 0px;\r\n    left: 1000px;\r\n    width: 100px;\r\n}\r\n/* 字体图标鼠标覆盖变色 */\r\n#songsheet i.iconfont.icon-bofang:hover {\r\n\tcursor: pointer;\r\n\tcolor: #f56c6c;\r\n}\r\n\r\n#songsheet {\r\n\tpadding-top: 0;\r\n\tposition: absolute;\r\n\twidth: 960px !important;\r\n\tright: 0;\r\n\tleft: 0;\r\n\tmargin-left: auto;\r\n\tmargin-right: auto;\r\n}\r\n</style>\r\n"]}]}