# 特点

- 可见性

  写完后立即刷新回主内存并及时发出通知，大家可以去主内存拿最新版，前面的修改对后面的线程可见

- 有序性：有时禁止指令重排

  重排序是指编译器和处理器为了优化程序性能而对指令序列进行重新排序的一种手段，有时候会改变程序语句的先后顺序；

  不存在数据依赖关系，可以重排序；

  存在数据依赖关系，禁止重排序。但重排后的指令绝对不能改变原有的串行语义!这点在并发设计中必须要重点考虑!

- <font color = 'red'>不支持原子性</font>

# volatile的内存语义

当写一个volatile变量时，JMM会把该线程对应的本地内存中的共享变量值<font color = 'red'>立即刷新回主内存中。</font>

当读一个volatile变量时，JMM会把该线程对应的本地内存设置为无效，重新回到主内存中读取最新共享变量。

所以volatile的写内存语义是直接刷新到主内存中，读的内存语义是直接从主内存中读取。

### volatile凭什么可以保证可见性和有序性？

内存屏障Memory Barrier



